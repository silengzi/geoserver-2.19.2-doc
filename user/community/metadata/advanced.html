<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Advanced Configuration &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../static/jquery.js"></script>
  <script type="text/javascript" src="../../static/doctools.js"></script>
  <script type="text/javascript" src="../../static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../index.html" />
      <link rel="up" title="Metadata" href="index.html" />
      <link rel="next" title="User Guide" href="user.html" />
      <link rel="prev" title="Fields configuration" href="uiconfiguration.html" />
</head>
<body class="community/metadata/advanced">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Community modules</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Metadata</a> &raquo;</li>
  <li>Advanced Configuration</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="user.html" title="User Guide"
       accesskey="N">next</a>|</li>
  <li>
    <a href="uiconfiguration.html" title="Fields configuration"
       accesskey="P">previous</a>|</li>
</ul>
        
  <blockquote>
<div></div></blockquote>
<div class="section" id="advanced-configuration">
<span id="community-metadata-advanced-configuration"></span><h1>Advanced Configuration<a class="headerlink" href="#advanced-configuration" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#import-from-geonetwork" id="id1">Import from Geonetwork</a></p></li>
<li><p><a class="reference internal" href="#custom-to-native-mapping" id="id2">Custom to Native Mapping</a></p></li>
</ul>
</div>
<div class="section" id="import-from-geonetwork">
<h2><a class="toc-backref" href="#id1">Import from Geonetwork</a><a class="headerlink" href="#import-from-geonetwork" title="Permalink to this headline">¶</a></h2>
<p>The <span class="guilabel">Import from Geonetwork</span> option allows the user to import existing metadata from <a class="reference external" href="https://geonetwork-opensource.org//">GeoNetwork</a>.
Two confurations are needed for the import to work:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>geonetworks:</strong> configure a list geonetwork endpoints</p></li>
<li><p><strong>geonetworkmapping:</strong> define the mapping between the geonetwork fields and the fields configured in the metadata module.</p></li>
</ul>
</div></blockquote>
<p>The configuration can be added to the same <a class="reference external" href="https://yaml.org/">yaml</a> file as the UI configuration or it can be put in a separate file.</p>
<div class="section" id="geonetwork-endpoint-configuration">
<h3>Geonetwork endpoint configuration<a class="headerlink" href="#geonetwork-endpoint-configuration" title="Permalink to this headline">¶</a></h3>
<p>The example will configure 2 endpoints.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">geonetworks</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Geonetwork DOV production</span>
      <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://www.dov.vlaanderen.be/geonetwork/srv/api/records/${UUID}/formatters/xml?attachment=true</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Geonetwork test</span>
      <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://geonetwork-opensource.org/test/srv/api/records/${UUID}/formatters/xml?attachment=true</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 6%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>name</strong></p></td>
<td><p>yes</p></td>
<td><p>The name of the Geonetwork endpoint that will be shown in the dropdown.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>url</strong></p></td>
<td><p>yes</p></td>
<td><p>The url of the XML export of the metadata in the Geonetwork, where <code class="docutils literal notranslate"><span class="pre">${UUID}</span></code> will be replaced by the metadata’s UUID.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="geonetwork-mapping-configuration">
<h3>Geonetwork mapping configuration<a class="headerlink" href="#geonetwork-mapping-configuration" title="Permalink to this headline">¶</a></h3>
<p>Each field from Geonetwork can be mapped to a native field from GeoServer or a field from the metadata module.
The configuration for simple components are added under the yaml attribute <cite>geonetworkmapping</cite>.
The fields of the type <code class="docutils literal notranslate"><span class="pre">COMPLEX</span></code> are mapped under the attribute  <cite>objectmapping</cite>.</p>
<p>The example will map one field (UUID) from the geonetwork xml to UI.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">geonetworkmapping</span><span class="p">:</span>
    <span class="p p-Indicator">-</span>  <span class="nt">geoserver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">metadata-identifier</span>
       <span class="nt">geonetwork</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">//gmd:fileIdentifier/gco:CharacterString/text()</span>
</pre></div>
</div>
<p>A complex object is mapped in the following example:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">objectmapping</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">typename</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">responsible-party</span>
      <span class="nt">mapping</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">geoserver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">organisation</span>
          <span class="nt">geonetwork</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.//gmd:CI_ResponsibleParty/gmd:organisationName/gco:CharacterString/text()</span>
        <span class="p p-Indicator">-</span> <span class="nt">geoserver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">contactinfo</span>
          <span class="nt">geonetwork</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.//gmd:CI_ResponsibleParty/gmd:contactInfo</span>
        <span class="p p-Indicator">-</span> <span class="nt">geoserver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">role</span>
          <span class="nt">geonetwork</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.//gmd:CI_ResponsibleParty/gmd:role/gmd:CI_RoleCode/@codeListValue</span>
</pre></div>
</div>
<p>Metadata from geonetwork can also be mapped to native fields. Do this by setting the <cite>mappingType</cite> to <code class="docutils literal notranslate"><span class="pre">NATIVE</span></code></p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span>  <span class="nt">geoserver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">title</span>
   <span class="nt">geonetwork</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">//gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:title/gco:CharacterString/text()</span>
   <span class="nt">mappingType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">NATIVE</span>
<span class="p p-Indicator">-</span>  <span class="nt">geoserver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">alias</span>
   <span class="nt">geonetwork</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">//gmd:identificationInfo/gmd:MD_DataIdentification/gmd:citation/gmd:CI_Citation/gmd:alternateTitle/gco:CharacterString/text()</span>
   <span class="nt">mappingType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">NATIVE</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>geoserver</strong></p></td>
<td><p>yes</p></td>
<td><p>the key for the attributes in geoserver</p></td>
</tr>
<tr class="row-odd"><td><p><strong>geonetwork</strong></p></td>
<td><p>yes</p></td>
<td><p>The <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/XPath">xpath</a> expression pointing to the content from the geonetwork metadata xml file.</p></td>
</tr>
<tr class="row-even"><td><p><strong>mappingType:</strong></p></td>
<td><p>no</p></td>
<td><div class="line-block">
<div class="line">CUSTOM (default; map to fields from the metadata module configuration)</div>
<div class="line">NATIVE (map to geoserver native fields)</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="custom-to-native-mapping">
<span id="community-metadata-advanced-configuration-custom-native"></span><h2><a class="toc-backref" href="#id2">Custom to Native Mapping</a><a class="headerlink" href="#custom-to-native-mapping" title="Permalink to this headline">¶</a></h2>
<p>Sometimes your custom metadata configuration may contain a more complex version of fields already present in geoserver native metadata,
or you may want to derive geoserver native fields (such as URL’s, keywords, etcetera) from information in your custom metadata. Native fields
are used by <code class="docutils literal notranslate"><span class="pre">GetCapabilities</span></code> requests, and you want to avoid filling in the same information twice. We can automatise deriving these
native fields from custom fields using a custom-to-native mapping configuration. For example in the following configuration:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">customNativeMappings</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">KEYWORDS</span>
    <span class="nt">mapping</span><span class="p">:</span>
      <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">KEY_${keywords/name}</span>
      <span class="nt">vocabulary</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${keywords/vocabulary}</span>
  <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">IDENTIFIERS</span>
    <span class="nt">mapping</span><span class="p">:</span>
      <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${identifiers/id}</span>
      <span class="nt">authority</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${identifiers/authority}</span>
  <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">METADATALINKS</span>
    <span class="nt">mapping</span><span class="p">:</span>
      <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://my-host/geonetwork/?uuid=${uuid}</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">text/html</span>
      <span class="nt">metadataType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ISO191156:2003</span>
  <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">METADATALINKS</span>
    <span class="nt">mapping</span><span class="p">:</span>
      <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://my-host/geonetwork/srv/nl/csw?Service=CSW&amp;Request=GetRecordById&amp;Version=2.0.2&amp;outputSchema=http://www.isotc211.org/2005/gmd&amp;elementSetName=full&amp;id=${uuid}</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">text/xml</span>
      <span class="nt">metadataType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ISO191156:2003</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 4%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>type</strong></p></td>
<td><p>yes</p></td>
<td><p>currently supported: KEYWORDS, IDENTIFIERS, METADATALINKS</p></td>
</tr>
<tr class="row-odd"><td><p><strong>mapping</strong></p></td>
<td><p>yes</p></td>
<td><div class="line-block">
<div class="line">List of key to value pairs. Value contains a literal with or without placeholder that contains custom attribute path (the <code class="docutils literal notranslate"><span class="pre">/</span></code> symbol denoting subfields inside complex fields).</div>
<div class="line">Possible keys for KEYWORDS: value, vocabulary</div>
<div class="line">Possible keys for METADATALINKS: value, type, metadataType, about</div>
<div class="line">Possible keys for IDENTIFIERS: value, authority</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The synchronisation of the metadata takes place each time a layer is saved. Any information that has been entered by the user in mapped native fields via the GUI will be lost.</p>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="uiconfiguration.html" title="previous chapter">Fields configuration</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="user.html" title="next chapter">User Guide</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Advanced Configuration</a><ul>
<li><a class="reference internal" href="#import-from-geonetwork">Import from Geonetwork</a><ul>
<li><a class="reference internal" href="#geonetwork-endpoint-configuration">Geonetwork endpoint configuration</a></li>
<li><a class="reference internal" href="#geonetwork-mapping-configuration">Geonetwork mapping configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-to-native-mapping">Custom to Native Mapping</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="uiconfiguration.html" title="previous chapter">Fields configuration</a></li>
            <li>Next: <a href="user.html" title="next chapter">User Guide</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/community/metadata/advanced.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>