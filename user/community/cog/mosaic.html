<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>ImageMosaic example with Modis COG datasets &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../static/jquery.js"></script>
  <script type="text/javascript" src="../../static/doctools.js"></script>
  <script type="text/javascript" src="../../static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../index.html" />
      <link rel="up" title="COG (Cloud Optimized GeoTIFF) Documentation" href="index.html" />
      <link rel="next" title="CoverageJSON output format" href="../cov-json/index.html" />
      <link rel="prev" title="COG (Cloud Optimized GeoTIFF) Support" href="cog.html" />
</head>
<body class="community/cog/mosaic">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Community modules</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">COG (Cloud Optimized GeoTIFF) Documentation</a> &raquo;</li>
  <li>ImageMosaic example with Modis COG datasets</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="../cov-json/index.html" title="CoverageJSON output format"
       accesskey="N">next</a>|</li>
  <li>
    <a href="cog.html" title="COG (Cloud Optimized GeoTIFF) Support"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="imagemosaic-example-with-modis-cog-datasets">
<span id="tutorial-imagemosaic-cog-landsat8"></span><h1>ImageMosaic example with Modis COG datasets<a class="headerlink" href="#imagemosaic-example-with-modis-cog-datasets" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This tutorial provide some hints on configuring an ImageMosaic on top of some MODIS Vegetation Index datasets available at <a class="reference external" href="https://earthdata.nasa.gov/collaborate/cloud-optimized-geotiffs">NASA EarthData</a></p>
</div>
<div class="section" id="imagemosaic-configuration-files">
<h2>ImageMosaic Configuration files<a class="headerlink" href="#imagemosaic-configuration-files" title="Permalink to this headline">¶</a></h2>
<p>We need a couple of configuration files to have an ImageMosaic propertly set. Configuration is based on these key points:</p>
<ul class="simple">
<li><p>The ImageMosaic will be initially created empty without any data. Data will be harvested as a second step.</p></li>
<li><p>A Time dimension will be used, based on the date contained in the file’s name.</p></li>
</ul>
<p>More details on ImageMosaic configuration are available on the dedicated documentation section: <a class="reference internal" href="../../data/raster/imagemosaic/configuration.html#data-imagemosaic-config"><span class="std std-ref">ImageMosaic configuration</span></a></p>
<p>Based on the above key points, we can setup the following configuration files:</p>
<div class="section" id="indexer-properties">
<h3>indexer.properties:<a class="headerlink" href="#indexer-properties" title="Permalink to this headline">¶</a></h3>
<p>This contains the main configuration to index the datasets composing the ImageMosaic.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Cog</span><span class="o">=</span><span class="n">true</span>
<span class="n">PropertyCollectors</span><span class="o">=</span><span class="n">TimestampFileNameExtractorSPI</span><span class="p">[</span><span class="n">timeregex</span><span class="p">](</span><span class="n">time</span><span class="p">)</span>
<span class="n">TimeAttribute</span><span class="o">=</span><span class="n">time</span>
<span class="n">Schema</span><span class="o">=*</span><span class="n">the_geom</span><span class="p">:</span><span class="n">Polygon</span><span class="p">,</span><span class="n">location</span><span class="p">:</span><span class="n">String</span><span class="p">,</span><span class="n">time</span><span class="p">:</span><span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">Date</span>
<span class="n">CanBeEmpty</span><span class="o">=</span><span class="n">true</span>
<span class="n">Name</span><span class="o">=</span><span class="n">modisvi</span>
</pre></div>
</div>
<p>Relevant parts:</p>
<ul class="simple">
<li><p>Cog flag specifying that the ImageMosaic is a Mosaic of COG Datasets</p></li>
<li><p>PropertyCollectors, TimeAttribute and Schema are used to define the ImageMosaic index columns and how to populate them</p></li>
<li><p>CanBeEmpty allows to define an empty ImageMosaic. It will be populated afterwards</p></li>
<li><p>Name is the name for this mosaic</p></li>
</ul>
</div>
<div class="section" id="timeregex-properties">
<h3>timeregex.properties:<a class="headerlink" href="#timeregex-properties" title="Permalink to this headline">¶</a></h3>
<p>The previous indexer refers to a time dimension and the related time column in the index’s schema that will get populated by extracting the time value from the filename (the 8 digits, representing YEAR, MONTH, DAY) using the regex specified in the timeregex.properties file. An example of sample file for this collection as stored on the S3 bucket is 2018.01.01.tif so the time regex will reflect that. Note the 3 groups of digits and the ‘format’ of the date.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">regex</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]{</span><span class="mi">4</span><span class="p">}</span><span class="o">.</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]{</span><span class="mi">2</span><span class="p">}</span><span class="o">.</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]{</span><span class="mi">2</span><span class="p">},</span><span class="nb">format</span><span class="o">=</span><span class="n">yyyy</span><span class="o">.</span><span class="n">MM</span><span class="o">.</span><span class="n">dd</span>
</pre></div>
</div>
</div>
<div class="section" id="datastore-properties">
<h3>datastore.properties:<a class="headerlink" href="#datastore-properties" title="Permalink to this headline">¶</a></h3>
<p>Due to the amount of available datasets, storing the ImageMosaic index on a DBMS is recommended, i.e. a PostGIS DB. See <a class="reference internal" href="../../data/raster/imagemosaic/configuration.html#mosaic-datastore-properties"><span class="std std-ref">datastore.properties</span></a> section of the ImageMosaic documentation for more info.
Make sure that a DB with the name reported in the datastore is available</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span><span class="o">=</span><span class="n">postgres</span>
<span class="n">port</span><span class="o">=</span><span class="mi">5432</span>
<span class="n">passwd</span><span class="o">=</span><span class="n">postgres</span>
<span class="n">url</span><span class="o">=</span><span class="n">jdbc</span>\<span class="p">:</span><span class="n">postgresql</span>\<span class="p">:</span><span class="n">modisvi</span>
<span class="n">host</span><span class="o">=</span><span class="n">localhost</span>
<span class="n">database</span><span class="o">=</span><span class="n">modisvi</span>
<span class="n">driver</span><span class="o">=</span><span class="n">org</span><span class="o">.</span><span class="n">postgresql</span><span class="o">.</span><span class="n">Driver</span>
<span class="n">schema</span><span class="o">=</span><span class="n">public</span>
<span class="n">SPI</span><span class="o">=</span><span class="n">org</span><span class="o">.</span><span class="n">geotools</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">postgis</span><span class="o">.</span><span class="n">PostgisNGDataStoreFactory</span>
<span class="n">fetch</span>\ <span class="n">size</span><span class="o">=</span><span class="mi">1000</span>
<span class="nb">max</span>\ <span class="n">connections</span><span class="o">=</span><span class="mi">20</span>
<span class="nb">min</span>\ <span class="n">connections</span><span class="o">=</span><span class="mi">5</span>
<span class="n">validate</span>\ <span class="n">connections</span><span class="o">=</span><span class="n">true</span>
<span class="n">Loose</span>\ <span class="n">bbox</span><span class="o">=</span><span class="n">true</span>
<span class="n">Expose</span>\ <span class="n">primary</span>\ <span class="n">key</span><span class="o">=</span><span class="n">false</span>
<span class="n">Max</span>\ <span class="nb">open</span>\ <span class="n">prepared</span>\ <span class="n">statements</span><span class="o">=</span><span class="mi">50</span>
<span class="n">preparedStatements</span><span class="o">=</span><span class="n">false</span>
<span class="n">Estimated</span>\ <span class="n">extends</span><span class="o">=</span><span class="n">false</span>
<span class="n">Connection</span>\ <span class="n">timeout</span><span class="o">=</span><span class="mi">20</span>
</pre></div>
</div>
<p>Once the 3 files have been setup, create a zip archive with them and let’s name it modisvi.zip. (Note that the files need to be in the root of the zip files, not into a subdirectory)</p>
<p>You are now ready to use REST calls to start the ImageMosaic creation.</p>
</div>
<div class="section" id="imagemosaic-rest-operations">
<h3>ImageMosaic REST operations<a class="headerlink" href="#imagemosaic-rest-operations" title="Permalink to this headline">¶</a></h3>
<p>On the next steps we assume:</p>
<ul class="simple">
<li><p>An existing GeoServer instance is running on port 8080 of localhost.</p></li>
<li><p>A workspace named “test” exists on that GeoServer.</p></li>
<li><p>REST credentials are user=admin password=geoserver.</p></li>
<li><p>A default aws region is defined on JAVA System Property, using the flag <cite>-Diio.https.aws.region=us-west-2</cite>.</p></li>
</ul>
<p>Make sure to update the incoming URLs accordingly, based on your actual installation.</p>
<p><strong>Create an empty ImageMosaic without configuring it</strong></p>
<div class="admonition-curl-request admonition">
<p class="admonition-title">curl request</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>curl -u admin:geoserver -XPUT --write-out %{http_code} -H &quot;Content-type:application/zip&quot; --data-binary @modisvi.zip http://localhost:8080/geoserver/rest/workspaces/test/coveragestores/modisvi/file.imagemosaic?configure=none
</pre></div>
</div>
</div>
<p><em>Response</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">201</span> <span class="n">OK</span>
</pre></div>
</div>
<p><strong>Providing sample prototyping granules</strong></p>
<p>Next step is providing a prototype dataset for the coverage to be supported.</p>
<div class="admonition-curl-request admonition">
<p class="admonition-title">curl request</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="p">:</span><span class="n">geoserver</span> <span class="o">-</span><span class="n">XPOST</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-type: text/plain&quot;</span> <span class="o">--</span><span class="n">write</span><span class="o">-</span><span class="n">out</span> <span class="o">%</span><span class="p">{</span><span class="n">http_code</span><span class="p">}</span> <span class="o">-</span><span class="n">d</span> <span class="s2">&quot;https://modis-vi-nasa.s3-us-west-2.amazonaws.com/MOD13A1.006/2018.01.01.tif&quot;</span> <span class="s2">&quot;http://localhost:8080/geoserver/rest/workspaces/test/coveragestores/modisvi/remote.imagemosaic&quot;</span>
</pre></div>
</div>
</div>
<p><em>Response</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">202</span> <span class="n">Accepted</span>
</pre></div>
</div>
<p><strong>Initializing the store (Listing available coverages)</strong></p>
<p>Once a prototype has been provided we need to initialize the store by querying it for the available coverages.</p>
<div class="admonition-curl-request admonition">
<p class="admonition-title">curl request</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>curl -v -u admin:geoserver -XGET http://localhost:8080/geoserver/rest/workspaces/test/coveragestores/modisvi/coverages.xml?list=all
</pre></div>
</div>
</div>
<p><em>Response</em></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;List&gt;</span>
  <span class="nt">&lt;coverageName&gt;</span>modisvi<span class="nt">&lt;/coverageName&gt;</span>
<span class="nt">&lt;/list&gt;</span>
</pre></div>
</div>
<p><strong>Configuring the coverage</strong></p>
<p>Once we get the list of available coverages, we need to configure a coverage by sending the config through REST.</p>
<div class="admonition-curl-request admonition">
<p class="admonition-title">curl request</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="p">:</span><span class="n">geoserver</span> <span class="o">-</span><span class="n">XPOST</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-type: text/xml&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="o">@</span><span class="s2">&quot;coverage.xml&quot;</span> <span class="s2">&quot;http://localhost:8080/geoserver/rest/workspaces/test/coveragestores/modisvi/coverages&quot;</span>
</pre></div>
</div>
</div>
<p>where coverage.xml has this content:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;coverage&gt;</span>
  <span class="nt">&lt;name&gt;</span>modisvi<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;nativeName&gt;</span>modisvi<span class="nt">&lt;/nativeName&gt;</span>
  <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
  <span class="nt">&lt;metadata&gt;</span>
    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;time&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;dimensionInfo&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
        <span class="nt">&lt;presentation&gt;</span>LIST<span class="nt">&lt;/presentation&gt;</span>
        <span class="nt">&lt;units&gt;</span>ISO8601<span class="nt">&lt;/units&gt;</span>
        <span class="nt">&lt;defaultValue&gt;</span>
          <span class="nt">&lt;strategy&gt;</span>MAXIMUM<span class="nt">&lt;/strategy&gt;</span>
        <span class="nt">&lt;/defaultValue&gt;</span>
      <span class="nt">&lt;/dimensionInfo&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
  <span class="nt">&lt;/metadata&gt;</span>
<span class="nt">&lt;/coverage&gt;</span>
</pre></div>
</div>
<p><strong>Adding more granules</strong></p>
<p>Now that we have a coverageStore ready and a coverage layer configured we can start adding more granules.</p>
<div class="admonition-curl-request admonition">
<p class="admonition-title">curl request</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="p">:</span><span class="n">geoserver</span> <span class="o">-</span><span class="n">XPOST</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-type: text/plain&quot;</span> <span class="o">--</span><span class="n">write</span><span class="o">-</span><span class="n">out</span> <span class="o">%</span><span class="p">{</span><span class="n">http_code</span><span class="p">}</span> <span class="o">-</span><span class="n">d</span> <span class="s2">&quot;https://modis-vi-nasa.s3-us-west-2.amazonaws.com/MOD13A1.006/2018.01.17.tif&quot;</span> <span class="s2">&quot;http://localhost:8080/geoserver/rest/workspaces/test/coveragestores/modisvi/remote.imagemosaic&quot;</span>
</pre></div>
</div>
</div>
<p><strong>Setting Style</strong></p>
<p>That MODIS data has 2 bands representing (Normalized Difference Vegetation Index) (NDVI) and Enhanced Vegetation Index (EVI).
Let’s add this ndvi.sld style to apply a proper colormap to the NDVI band (copy this content to a file named ndvi.sld to be used by the next REST call):</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;StyledLayerDescriptor</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.opengis.net/sld&quot;</span> <span class="na">xmlns:sld=</span><span class="s">&quot;http://www.opengis.net/sld&quot;</span> <span class="na">xmlns:gml=</span><span class="s">&quot;http://www.opengis.net/gml&quot;</span> <span class="na">xmlns:ogc=</span><span class="s">&quot;http://www.opengis.net/ogc&quot;</span> <span class="na">version=</span><span class="s">&quot;1.0.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;NamedLayer&gt;</span>
    <span class="nt">&lt;Name&gt;</span>Default Styler<span class="nt">&lt;/Name&gt;</span>
    <span class="nt">&lt;UserStyle&gt;</span>
      <span class="nt">&lt;Name&gt;</span>ndvi<span class="nt">&lt;/Name&gt;</span>
      <span class="nt">&lt;Title&gt;</span>ndvi<span class="nt">&lt;/Title&gt;</span>
      <span class="nt">&lt;FeatureTypeStyle&gt;</span>
        <span class="nt">&lt;Name&gt;</span>name<span class="nt">&lt;/Name&gt;</span>
        <span class="nt">&lt;Rule&gt;</span>
          <span class="nt">&lt;RasterSymbolizer&gt;</span>
            <span class="nt">&lt;ChannelSelection&gt;</span>
              <span class="nt">&lt;GrayChannel&gt;</span>
                <span class="nt">&lt;SourceChannelName&gt;</span>1<span class="nt">&lt;/SourceChannelName&gt;</span>
              <span class="nt">&lt;/GrayChannel&gt;</span>
            <span class="nt">&lt;/ChannelSelection&gt;</span>
            <span class="nt">&lt;ColorMap&gt;</span>
              <span class="nt">&lt;ColorMapEntry</span> <span class="na">color=</span><span class="s">&quot;#000000&quot;</span> <span class="na">quantity=</span><span class="s">&quot;-1&quot;</span><span class="nt">/&gt;</span>
              <span class="nt">&lt;ColorMapEntry</span> <span class="na">color=</span><span class="s">&quot;#0000ff&quot;</span> <span class="na">quantity=</span><span class="s">&quot;-0.75&quot;</span><span class="nt">/&gt;</span>
              <span class="nt">&lt;ColorMapEntry</span> <span class="na">color=</span><span class="s">&quot;#ff00ff&quot;</span> <span class="na">quantity=</span><span class="s">&quot;-0.25&quot;</span><span class="nt">/&gt;</span>
              <span class="nt">&lt;ColorMapEntry</span> <span class="na">color=</span><span class="s">&quot;#ff0000&quot;</span> <span class="na">quantity=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
              <span class="nt">&lt;ColorMapEntry</span> <span class="na">color=</span><span class="s">&quot;#ffff00&quot;</span> <span class="na">quantity=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
              <span class="nt">&lt;ColorMapEntry</span> <span class="na">color=</span><span class="s">&quot;#00ff00&quot;</span> <span class="na">quantity=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/ColorMap&gt;</span>
            <span class="nt">&lt;ContrastEnhancement/&gt;</span>
          <span class="nt">&lt;/RasterSymbolizer&gt;</span>
        <span class="nt">&lt;/Rule&gt;</span>
      <span class="nt">&lt;/FeatureTypeStyle&gt;</span>
    <span class="nt">&lt;/UserStyle&gt;</span>
  <span class="nt">&lt;/NamedLayer&gt;</span>
<span class="nt">&lt;/StyledLayerDescriptor&gt;</span>
</pre></div>
</div>
<div class="admonition-curl-request-to-create-the-style admonition">
<p class="admonition-title">curl request to create the style</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="p">:</span><span class="n">geoserver</span> <span class="o">-</span><span class="n">XPOST</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-type: application/vnd.ogc.sld+xml&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="nd">@ndvi</span><span class="o">.</span><span class="n">sld</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">styles</span>
</pre></div>
</div>
</div>
<div class="admonition-curl-request-to-set-the-style-as-default-style-of-the-layer admonition">
<p class="admonition-title">curl request to set the style as default style of the layer</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="p">:</span><span class="n">geoserver</span> <span class="o">-</span><span class="n">XPUT</span> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-type: text/xml&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="s2">&quot;&lt;layer&gt;&lt;defaultStyle&gt;&lt;name&gt;ndvi&lt;/name&gt;&lt;/defaultStyle&gt;&lt;/layer&gt;&quot;</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">layers</span><span class="o">/</span><span class="n">modisvi</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="final-preview">
<h3>Final preview<a class="headerlink" href="#final-preview" title="Permalink to this headline">¶</a></h3>
<p>This is how a layer preview will looks like:</p>
<div class="figure align-default" id="id1">
<img alt="../../_images/ndvi.png" src="../../_images/ndvi.png" />
<p class="caption"><span class="caption-text">NDVI COG dataset</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="cog.html" title="previous chapter">COG (Cloud Optimized GeoTIFF) Support</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="../cov-json/index.html" title="next chapter">CoverageJSON output format</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">ImageMosaic example with Modis COG datasets</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#imagemosaic-configuration-files">ImageMosaic Configuration files</a><ul>
<li><a class="reference internal" href="#indexer-properties">indexer.properties:</a></li>
<li><a class="reference internal" href="#timeregex-properties">timeregex.properties:</a></li>
<li><a class="reference internal" href="#datastore-properties">datastore.properties:</a></li>
<li><a class="reference internal" href="#imagemosaic-rest-operations">ImageMosaic REST operations</a></li>
<li><a class="reference internal" href="#final-preview">Final preview</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="cog.html" title="previous chapter">COG (Cloud Optimized GeoTIFF) Support</a></li>
            <li>Next: <a href="../cov-json/index.html" title="next chapter">CoverageJSON output format</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/community/cog/mosaic.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>