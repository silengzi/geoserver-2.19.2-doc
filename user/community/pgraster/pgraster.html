<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>PGRaster &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../_static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../index.html" />
      <link rel="up" title="Community modules" href="../index.html" />
      <link rel="next" title="JMS based Clustering" href="../jms-cluster/index.html" />
      <link rel="prev" title="GeoPackage As Output" href="../geopkg/output.html" />
</head>
<body class="community/pgraster/pgraster">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Community modules</a> &raquo;</li>
  <li>PGRaster</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="../jms-cluster/index.html" title="JMS based Clustering"
       accesskey="N">next</a>|</li>
  <li>
    <a href="../geopkg/output.html" title="GeoPackage As Output"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="pgraster">
<span id="community-pgraster"></span><h1>PGRaster<a class="headerlink" href="#pgraster" title="Permalink to this headline">¶</a></h1>
<p>The PGRaster geoserver module adds the ability to simplify the configuration of a PostGis Raster based ImageMosaic-JDBC store.
Before proceeding, make sure to take a look to the <a class="reference external" href="https://docs.geotools.org/latest/userguide/library/coverage/pgraster.html">PostGis Raster plugin documentation</a> for background information. Note that configuration files, table creations and raster imports explained in that documentation, will be automatically handled by this module.</p>
<p><strong>This module allows to do the following steps automatically:</strong></p>
<ol class="arabic simple">
<li><p>use raster2pgsql (optionally) to import raster tiles previously configured with gdal_retile</p></li>
<li><p>create a metadata table (optionally) referring to tiles tables created through raster2pgsql</p></li>
<li><p>create the imageMosaic JDBC XML configuration containing PostGis database connection parameters, attributes mapping and coverage configuration.</p></li>
<li><p>configure the imageMosaic JDBC on top of the newly configured XML.</p></li>
</ol>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>You must have a PostGIS 2.0 database where your raster tiles will be stored.</p></li>
<li><p>Raster tiles should have been previously created using <code class="docutils literal notranslate"><span class="pre">gdal_retile</span></code> since this module will simply import them and configure the store. The ImageMosaic JDBC setup example documentation provides <a class="reference external" href="https://docs.geotools.org/latest/userguide/library/coverage/jdbc/prepare.html">examples</a> of how to do that.</p></li>
<li><p>In case you want to perform automatic import of the raster tiles into the database, you need to have raster2pgsql and psql executables installed on your machine and configured on your <code class="docutils literal notranslate"><span class="pre">PATH</span></code>. (In case your PostGIS 2.0 installation is on the same machine where you will run GeoServer, the executables should be already available).</p></li>
</ul>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Download the pgraster community module for your version of GeoServer from the <a class="reference external" href="https://build.geoserver.org/geoserver/master/community-latest/">download page</a>.</p></li>
<li><p>Unzip the archive into the WEB-INF/lib directory of the GeoServer installation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On Windows, make sure to add a <code class="docutils literal notranslate"><span class="pre">RASTER2PGSQL_PATH=Drive:\Path\to\bin\folder\containing_raster2pgsqlExecutable</span></code> property to the <code class="docutils literal notranslate"><span class="pre">JAVA_OPTS</span></code> as an instance: <code class="docutils literal notranslate"><span class="pre">JAVA_OPTS=-DRASTER2PGSQL_PATH=C:\work\programs\PostgreSQL\9.2\bin</span></code></p>
</div>
</li>
<li><p>Restart GeoServer.</p></li>
</ol>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>As for any other store configuration, go to Stores-&gt;Add new Store</p></li>
<li><p>Select ImageMosaicJDBC. You will see the usual “Add Raster Data Source” form.</p>
<blockquote>
<div><div class="figure align-default">
<img alt="../../_images/imagemosaicjdbcstore.png" src="../../_images/imagemosaicjdbcstore.png" />
</div>
<p>For backward compatibility, you may still configure an ImageMosaicJDBC in the old-way, by specifying the URL of a valid
XML configuration file, as done in the past (Where all the components of the ImageMosaicJDBC need to be configured by hand by the user).</p>
</div></blockquote>
</li>
<li><p>Notice the presence of a checkBox which allows to proceed with the PGRaster automatic configuration parameters specification.
Once Clicking on it, you will see a set of new parameters for the automatic configuration step. When enabling that checkBox, the URL parameter needs to point to the main folder containing the rasters which have been previously produced using gdal_retile.</p>
<blockquote>
<div><div class="figure align-default">
<img alt="../../_images/pgrasterparams.png" src="../../_images/pgrasterparams.png" />
</div>
<p>Other parameters are explained below:</p>
</div></blockquote>
</li>
</ol>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PostGIS server</p></td>
<td><p>The PostGIS server IP</p></td>
</tr>
<tr class="row-odd"><td><p>PostGIS port</p></td>
<td><p>The PostGIS server port</p></td>
</tr>
<tr class="row-even"><td><p>User</p></td>
<td><p>The PostGIS DB user</p></td>
</tr>
<tr class="row-odd"><td><p>Password</p></td>
<td><p>The PostGIS DB password</p></td>
</tr>
<tr class="row-even"><td><p>Database</p></td>
<td><p>The PostGIS Database (should have already been created)</p></td>
</tr>
<tr class="row-odd"><td><p>Schema</p></td>
<td><p>The schema where the table will be created (default is public. The schema need to be already defined into the Database before the import)</p></td>
</tr>
<tr class="row-even"><td><p>Table</p></td>
<td><p>The name of the metadata table which contains all the references to</p></td>
</tr>
<tr class="row-odd"><td><p>File extension</p></td>
<td><p>The extension of the raster files to be imported (such as <code class="docutils literal notranslate"><span class="pre">png</span></code>). It may not be specified when raster tiles have been already manually imported into the database by the user</p></td>
</tr>
<tr class="row-even"><td><p>raster2pgsql import options</p></td>
<td><p>The raster2pgsql script importing options (as an instance “-t 128x128” for raster tiles of 128x128). It may not be specified when raster tiles have been already manually imported into the database by the user</p></td>
</tr>
<tr class="row-odd"><td><p>EPSG Code</p></td>
<td><p>The EPSG code which will be configured in the coverage configuration xml. (Default is 4326)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>Right now it doesn’t allow to import data folders which have been created with the gdal_retile’s <code class="docutils literal notranslate"><span class="pre">useDirForEachRow</span></code> option.</p>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="../geopkg/output.html" title="previous chapter">GeoPackage As Output</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="../jms-cluster/index.html" title="next chapter">JMS based Clustering</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">PGRaster</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="../geopkg/output.html" title="previous chapter">GeoPackage As Output</a></li>
            <li>Next: <a href="../jms-cluster/index.html" title="next chapter">JMS based Clustering</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/community/pgraster/pgraster.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>