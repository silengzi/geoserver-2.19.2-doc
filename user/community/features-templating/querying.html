<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Backward Mapping &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../static/jquery.js"></script>
  <script type="text/javascript" src="../../static/doctools.js"></script>
  <script type="text/javascript" src="../../static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../index.html" />
      <link rel="up" title="Features-Templating Extension" href="index.html" />
      <link rel="next" title="OGC API Extension" href="../ogc-api/index.html" />
      <link rel="prev" title="Template Output Format" href="output.html" />
</head>
<body class="community/features-templating/querying">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Community modules</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Features-Templating Extension</a> &raquo;</li>
  <li>Backward Mapping</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="../ogc-api/index.html" title="OGC API Extension"
       accesskey="N">next</a>|</li>
  <li>
    <a href="output.html" title="Template Output Format"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="backward-mapping">
<h1>Backward Mapping<a class="headerlink" href="#backward-mapping" title="Permalink to this headline">Â¶</a></h1>
<p>When performing queries, using CQL filters, against layers that support a templated output, it will be possible to reference the template attributes in the CQL expressions. The plugin will take care of interpreting the CQL filter and translate it, when possible, to a data source native filter. For example, if that data source is a relational database, the CQL filter will be translated to one or multiple SQL queries that will be used to retrieve only the needed data.</p>
<p>Consider the following JSON-LD output example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;@context&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;gsp&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.opengis.net/ont/geosparql#&quot;</span><span class="p">,</span>
      <span class="nt">&quot;sf&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.opengis.net/ont/sf#&quot;</span><span class="p">,</span>
      <span class="nt">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;https://schema.org/&quot;</span><span class="p">,</span>
      <span class="nt">&quot;dc&quot;</span><span class="p">:</span> <span class="s2">&quot;http://purl.org/dc/terms/&quot;</span><span class="p">,</span>
      <span class="nt">&quot;Feature&quot;</span><span class="p">:</span> <span class="s2">&quot;gsp:Feature&quot;</span><span class="p">,</span>
      <span class="nt">&quot;FeatureCollection&quot;</span><span class="p">:</span> <span class="s2">&quot;schema:Collection&quot;</span><span class="p">,</span>
      <span class="nt">&quot;Point&quot;</span><span class="p">:</span> <span class="s2">&quot;sf:Point&quot;</span><span class="p">,</span>
      <span class="nt">&quot;wkt&quot;</span><span class="p">:</span> <span class="s2">&quot;gsp:asWKT&quot;</span><span class="p">,</span>
      <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;@container&quot;</span><span class="p">:</span> <span class="s2">&quot;@set&quot;</span><span class="p">,</span>
          <span class="nt">&quot;@id&quot;</span><span class="p">:</span> <span class="s2">&quot;schema:hasPart&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;geometry&quot;</span><span class="p">:</span> <span class="s2">&quot;sf:geometry&quot;</span><span class="p">,</span>
      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;dc:description&quot;</span><span class="p">,</span>
      <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;dc:title&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;schema:name&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
  <span class="nt">&quot;features&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="nt">&quot;@id&quot;</span><span class="p">:</span> <span class="s2">&quot;mf2&quot;</span><span class="p">,</span>
          <span class="nt">&quot;@type&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
              <span class="s2">&quot;gsml:MappedFeature&quot;</span><span class="p">,</span>
              <span class="s2">&quot;http://vocabulary.odm2.org/samplingfeaturetype/mappedFeature&quot;</span>
          <span class="p">],</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;MERCIA MUDSTONE GROUP&quot;</span><span class="p">,</span>
          <span class="nt">&quot;gsml:positionalAccuracy&quot;</span><span class="p">:{</span>
              <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;100&quot;</span><span class="p">,</span>
              <span class="nt">&quot;valueArray&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;100&quot;</span><span class="p">,</span><span class="s2">&quot;someStaticVal&quot;</span><span class="p">]</span>
          <span class="p">},</span>
          <span class="nt">&quot;gsml:GeologicUnit&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">&quot;@id&quot;</span><span class="p">:</span> <span class="s2">&quot;gu.25678&quot;</span><span class="p">,</span>
              <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Olivine basalt, tuff, microgabbro, minor sedimentary rocks&quot;</span><span class="p">,</span>
              <span class="nt">&quot;gsml:geologicUnitType&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:ogc:def:nil:OGC::unknown&quot;</span><span class="p">,</span>
              <span class="nt">&quot;gsml:composition&quot;</span><span class="p">:</span> <span class="p">[</span>
                  <span class="p">{</span>
                      <span class="nt">&quot;gsml:compositionPart&quot;</span><span class="p">:</span> <span class="p">[</span>
                          <span class="p">{</span>
                              <span class="nt">&quot;gsml:role&quot;</span><span class="p">:</span> <span class="p">{</span>
                                  <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;interbedded component&quot;</span><span class="p">,</span>
                                  <span class="nt">&quot;@codeSpace&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:cgi:classi...&quot;</span>
                              <span class="p">},</span>
                              <span class="nt">&quot;proportion&quot;</span><span class="p">:</span> <span class="p">{</span>
                                  <span class="nt">&quot;@dataType&quot;</span><span class="p">:</span> <span class="s2">&quot;CGI_ValueProperty&quot;</span><span class="p">,</span>
                                  <span class="nt">&quot;CGI_TermValue&quot;</span><span class="p">:</span> <span class="p">{</span>
                                      <span class="nt">&quot;@dataType&quot;</span><span class="p">:</span> <span class="s2">&quot;CGI_TermValue&quot;</span><span class="p">,</span>
                                      <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
                                          <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;significant&quot;</span><span class="p">,</span>
                                          <span class="nt">&quot;@codeSpace&quot;</span><span class="p">:</span> <span class="s2">&quot;some:uri&quot;</span>
                                      <span class="p">}</span>
                                  <span class="p">}</span>
                              <span class="p">},</span>
                              <span class="nt">&quot;lithology&quot;</span><span class="p">:</span> <span class="p">[</span>
                                  <span class="p">{</span>
                                      <span class="nt">&quot;@id&quot;</span><span class="p">:</span> <span class="s2">&quot;cc.3&quot;</span><span class="p">,</span>
                                      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
                                          <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;name_cc_3&quot;</span><span class="p">,</span>
                                          <span class="nt">&quot;@lang&quot;</span><span class="p">:</span> <span class="s2">&quot;en&quot;</span>
                                      <span class="p">},</span>
                                      <span class="nt">&quot;vocabulary&quot;</span><span class="p">:</span> <span class="p">{</span>
                                          <span class="nt">&quot;@href&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:ogc:def:nil:OGC::missing&quot;</span>
                                      <span class="p">}</span>
                                  <span class="p">}</span>
                              <span class="p">]</span>
                          <span class="p">}</span>
                      <span class="p">]</span>
                  <span class="p">},</span>
                  <span class="p">{</span>
                      <span class="nt">&quot;gsml:compositionPart&quot;</span><span class="p">:</span> <span class="p">[</span>
                          <span class="p">{</span>
                              <span class="nt">&quot;gsml:role&quot;</span><span class="p">:</span> <span class="p">{</span>
                                  <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;interbedded component&quot;</span><span class="p">,</span>
                                  <span class="nt">&quot;@codeSpace&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:cgi:class...&quot;</span>
                              <span class="p">},</span>
                              <span class="nt">&quot;proportion&quot;</span><span class="p">:</span> <span class="p">{</span>
                                  <span class="nt">&quot;@dataType&quot;</span><span class="p">:</span> <span class="s2">&quot;CGI_ValueProperty&quot;</span><span class="p">,</span>
                                  <span class="nt">&quot;CGI_TermValue&quot;</span><span class="p">:</span> <span class="p">{</span>
                                      <span class="nt">&quot;@dataType&quot;</span><span class="p">:</span> <span class="s2">&quot;CGI_TermValue&quot;</span><span class="p">,</span>
                                      <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
                                          <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;minor&quot;</span><span class="p">,</span>
                                          <span class="nt">&quot;@codeSpace&quot;</span><span class="p">:</span> <span class="s2">&quot;some:uri&quot;</span>
                                      <span class="p">}</span>
                                  <span class="p">}</span>
                              <span class="p">},</span>
                              <span class="nt">&quot;lithology&quot;</span><span class="p">:</span> <span class="p">[</span>
                                  <span class="p">{</span>
                                      <span class="nt">&quot;@id&quot;</span><span class="p">:</span> <span class="s2">&quot;cc.4&quot;</span><span class="p">,</span>
                                      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
                                          <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;name_cc_4&quot;</span><span class="p">,</span>
                                          <span class="nt">&quot;@lang&quot;</span><span class="p">:</span> <span class="s2">&quot;en&quot;</span>
                                      <span class="p">},</span>
                                      <span class="nt">&quot;vocabulary&quot;</span><span class="p">:</span> <span class="p">{</span>
                                          <span class="nt">&quot;@href&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:ogc:def:nil:OGC::missing&quot;</span>
                                      <span class="p">}</span>
                                  <span class="p">}</span>
                              <span class="p">]</span>
                          <span class="p">}</span>
                      <span class="p">]</span>
                  <span class="p">}</span>
              <span class="p">],</span>
              <span class="nt">&quot;geometry&quot;</span><span class="p">:</span> <span class="p">{</span>
                  <span class="nt">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;wkt&quot;</span><span class="p">:</span> <span class="s2">&quot;POLYGON ((52.5 -1.3, 52.6 -1.3, 52.6 -1.2,...))&quot;</span>
              <span class="p">}</span>
          <span class="p">}</span>
      <span class="p">}</span>
  <span class="p">]</span>
  <span class="p">}</span>
</pre></div>
</div>
<p>The following are example of valid CQL filters:</p>
<ul class="simple">
<li><p>features.gsml:GeologicUnit.description = âsome string valueâ</p></li>
<li><p>features.â&#64;idâ = â3245â</p></li>
<li><p>features.name in (âMERCIA MUDSTONEâ, âUKNOWNâ)</p></li>
<li><p>features.gsml:positionalAccuracy.valueArray1 = â100â</p></li>
</ul>
<p>As the last example shows, to refer to elements in arrays listing simple attributes, the index of the attribute is needed, starting from 1, in the form <code class="docutils literal notranslate"><span class="pre">{attributeName}{index}</span></code>, as in <code class="docutils literal notranslate"><span class="pre">features.gsml:positionalAccuracy.valueArray1.</span></code></p>
<p>Is worth mentioning that, as demonstrated in the examples above, <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> can be used to escape the attributes path components.</p>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="output.html" title="previous chapter">Template Output Format</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="../ogc-api/index.html" title="next chapter">OGC API Extension</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="output.html" title="previous chapter">Template Output Format</a></li>
            <li>Next: <a href="../ogc-api/index.html" title="next chapter">OGC API Extension</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/community/features-templating/querying.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>