<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Parameterize catalog settings &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../static/default.css" type="text/css" />
  <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../static/jquery.js"></script>
  <script type="text/javascript" src="../static/doctools.js"></script>
  <script type="text/javascript" src="../static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
  <link rel="shortcut icon" href="../static/geoserver.ico"/>
      <link rel="search" title="Search" href="../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../index.html" />
      <link rel="up" title="GeoServer data directory" href="index.html" />
      <link rel="next" title="Running in a production environment" href="../production/index.html" />
      <link rel="prev" title="Migrating a data directory between versions" href="migrating.html" />
</head>
<body class="datadirectory/configtemplate">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">GeoServer data directory</a> &raquo;</li>
  <li>Parameterize catalog settings</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="../production/index.html" title="Running in a production environment"
       accesskey="N">next</a>|</li>
  <li>
    <a href="migrating.html" title="Migrating a data directory between versions"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="parameterize-catalog-settings">
<span id="datadir-configtemplate"></span><h1>Parameterize catalog settings<a class="headerlink" href="#parameterize-catalog-settings" title="Permalink to this headline">¶</a></h1>
<p>This feature allows to parameterize some of the settings in GeoServer’s catalog.</p>
<p>What we mean with that is that you are able to use a templating mechanism to tailor GeoServer’s settings to the environment in which is run.</p>
<p>For example, you’d want to move the latest changes you’ve made from a GeoServer instance running on machine <strong>A</strong> to another instance running on machine <strong>B</strong> but there are some differences in the way the two environments are set up, let’s say the password used to connect to the database is different.</p>
<p>If you simply create a backup of the catalog from instance <strong>A</strong> and restore it on instance <strong>B</strong>, the stores configured on the database will not be accessible and the corresponding layers will not work properly.</p>
<p>Another example would be the max number of connections available in the connection pool to the database. You might want to have a different pool configuration in the two environments (maybe GeoServer on machine <strong>A</strong> is a test instance and GeoServer on machine <strong>B</strong> is used in production).</p>
<p>To overcome such limitation (to have the environment set up in the exact same way on the source machine and on the destination machine) the ENV parametrization allows you to customize the catalog configuration via the use of a templating system.</p>
<p>First of all to be able to use this feature, set the following flag via system variable to GeoServer’s environment:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">DALLOW_ENV_PARAMETRIZATION</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
</div></blockquote>
<p>Then create a file called <code class="docutils literal notranslate"><span class="pre">geoserver-environment.properties</span></code> in the root of GeoServer’s datadir.
This file will contain the definitions for the variables parameterized in the catalog configuration.</p>
<p>Now edit GeoServer’s configuration files of the source machine that you want to be parametric, for example let’s parameterize the URL of a store
(this can also be done via GeoServer admin UI):</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">vim</span> <span class="pre">coveragestore.xml</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>...
 &lt;enabled&gt;true&lt;/enabled&gt;
  &lt;workspace&gt;
    &lt;id&gt;WorkspaceInfoImpl--134aa31e:1564c12ef68:-7ffe&lt;/id&gt;
  &lt;/workspace&gt;
  &lt;__default&gt;false&lt;/__default&gt;
  &lt;url&gt;${store_url}&lt;/url&gt;
&lt;/coverageStore&gt;
</pre></div>
</div>
</div></blockquote>
<p>Add a definition for the variable <strong>store_url</strong> in your</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">geoserver-environment.properties</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">store_url</span> <span class="o">=</span> <span class="n">file</span><span class="p">:</span><span class="o">///</span><span class="n">var</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">store</span><span class="o">/</span><span class="n">teststore</span>
</pre></div>
</div>
</div></blockquote>
<p>Now restart GeoServer and navigate to the store config</p>
<div class="figure align-center">
<img alt="../_images/configtemplate001.png" src="../_images/configtemplate001.png" />
</div>
<p>As you can see the URL in “Connection Parameters” settings now refers the variable <strong>store_url</strong> whose value is defined in the <code class="docutils literal notranslate"><span class="pre">geoserver-environment.properties</span></code> file.</p>
<p>Another common use case is parameterizing connection details for a vector datastore. Hostname, credentials and connection pool parameters for the databases tend to change between environments.
Once you set the variables in the <code class="docutils literal notranslate"><span class="pre">geoserver-environment.properties</span></code> file, you can configure the Datastore from the GeoServer UI as follows:</p>
<div class="figure align-center">
<img alt="../_images/configtemplate002.png" src="../_images/configtemplate002.png" />
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="migrating.html" title="previous chapter">Migrating a data directory between versions</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="../production/index.html" title="next chapter">Running in a production environment</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="migrating.html" title="previous chapter">Migrating a data directory between versions</a></li>
            <li>Next: <a href="../production/index.html" title="next chapter">Running in a production environment</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/datadirectory/configtemplate.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>