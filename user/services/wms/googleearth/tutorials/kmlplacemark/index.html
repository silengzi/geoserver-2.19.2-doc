<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>KML Placemark Templates &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../../../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../../../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../../../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../../../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../../../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../../../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../../../../_static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../../../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../../../../index.html" />
      <link rel="up" title="Tutorials" href="../index.html" />
      <link rel="next" title="Heights Templates" href="../heights/heights.html" />
      <link rel="prev" title="Tutorials" href="../index.html" />
</head>
<body class="services/wms/googleearth/tutorials/kmlplacemark/index">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../../../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../../../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../../../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../../../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../../../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../../../../index.html" accesskey="U">Services</a> &raquo;</li>
  <li><a href="../../../index.html" accesskey="U">Web Map Service (WMS)</a> &raquo;</li>
  <li><a href="../../index.html" accesskey="U">Google Earth</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Tutorials</a> &raquo;</li>
  <li>KML Placemark Templates</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../../../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="../heights/heights.html" title="Heights Templates"
       accesskey="N">next</a>|</li>
  <li>
    <a href="../index.html" title="Tutorials"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="kml-placemark-templates">
<span id="getutorial-kmlplacemark"></span><h1>KML Placemark Templates<a class="headerlink" href="#kml-placemark-templates" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In KML a “Placemark” is used to mark a position on a map, often visualized with a yellow push pin. A placemark can have a “description” which allows one to attach information to it. Placemark descriptions are nothing more then an HTML snippet and can contain anything we want it to.</p>
<p>By default GeoServer produces placemark descriptions which are HTML tables describing all the attributes available for a particular feature in a dataset. In the following image we see the placemark description for the feature representing Idaho state:</p>
<div class="figure align-center" id="id1">
<img alt="../../../../../_images/default.jpg" src="../../../../../_images/default.jpg" />
<p class="caption"><span class="caption-text"><em>The default placemark</em></span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>This is great, but what about if one wanted some other sort of information to be conveyed in the description. Or perhaps one does not want to show all the attributes of the dataset. The answer is Templates!!</p>
<p>A template is more or less a way to create some output.</p>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>First let us get set up. To complete the tutorial you will need the following:</p>
<ul class="simple">
<li><p>A GeoServer install</p></li>
<li><p>A text editor</p></li>
</ul>
<p>And thats it. For this tutorial we will assume that GeoServer is running the same configuration ( data directory ) that it does out of the box.</p>
</div>
<div class="section" id="hello-world">
<h2>Hello World<a class="headerlink" href="#hello-world" title="Permalink to this headline">¶</a></h2>
<p>Ok, time to get to creating our first template. We will start off an extremely simple template which, you guessed it, creates the placemark description “Hello World!”. So lets go.</p>
<ol class="arabic">
<li><p>Using the text editor of your choice start a new file called <code class="docutils literal notranslate"><span class="pre">description.ftl</span></code></p></li>
<li><p>Add the following content to the file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Hello World!
</pre></div>
</div>
</li>
<li><p>Save the file in the <code class="docutils literal notranslate"><span class="pre">workspaces/topp/states_shapefile/states</span></code> directory of your “data directory”. The data directory is the location of all the GeoServer configuration files. It is normally pointed to by the environment variable <code class="docutils literal notranslate"><span class="pre">GEOSERVER_DATA_DIR</span></code>.</p></li>
<li><p>Start GeoServer is it is not already running.</p></li>
</ol>
<p>And thats it. We can now test out our template by adding the following network link in google earth:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost:8080/geoserver/wms/kml?layers=states
</pre></div>
</div>
<p>And voila. Your first template</p>
<blockquote>
<div><div class="figure align-center" id="id2">
<img alt="../../../../../_images/helloworld.png" src="../../../../../_images/helloworld.png" />
<p class="caption"><span class="caption-text"><em>Hello World template.</em></span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div></blockquote>
<p><strong>Refreshing Templates</strong>: One nice aspect of templates is that they are read upon every request. So one can simply edit the template in place and have it picked up by GeoServer as soon as the file is saved. So when after editing and saving a template simply “Refresh” the network link in Google Earth to have the new content picked up.</p>
<blockquote>
<div><div class="figure align-center" id="id3">
<img alt="../../../../../_images/refresh.png" src="../../../../../_images/refresh.png" />
<p class="caption"><span class="caption-text"><em>Refresh Template</em></span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div></blockquote>
<p>As stated before template descriptions are nothing more than html. Play around with <code class="docutils literal notranslate"><span class="pre">description.ftl</span></code> and add some of your own html. Some examples you may want to try:</p>
<ol class="arabic">
<li><p>A simple link to the homepage of your organization:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Provided</span> <span class="n">by</span> <span class="n">the</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;http://topp.openplans.org&quot;</span><span class="o">&gt;</span><span class="n">The</span> <span class="n">Open</span> <span class="n">Planning</span> <span class="n">Project</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;.</span>
</pre></div>
</div>
</li>
</ol>
<p>Homepage of Topp</p>
<blockquote>
<div><div class="figure align-center" id="id4">
<img alt="../../../../../_images/topplink.png" src="../../../../../_images/topplink.png" />
<p class="caption"><span class="caption-text"><em>Homepage of Topp</em></span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>The logo of your organization:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://topp.openplans.org/images/logo.jpg&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
</li>
</ol>
<p>Logo of Topp</p>
<blockquote>
<div><div class="figure align-center" id="id5">
<img alt="../../../../../_images/topplogo.png" src="../../../../../_images/topplogo.png" />
<p class="caption"><span class="caption-text"><em>Logo of Topp</em></span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div></blockquote>
<p>The possibilities are endless. Now this is all great and everything but these examples are some what lacking in that the content is static. In the next section we will create more realistic template which actually access some the attributes of our data set.</p>
</div>
<div class="section" id="data-content">
<h2>Data Content<a class="headerlink" href="#data-content" title="Permalink to this headline">¶</a></h2>
<p>The real power of templates is the ability to easily access content, in the case of features this content is the attributes of features.In a KML placemark description template, there are a number of “template variables” available.</p>
<ul class="simple">
<li><p>The variable “fid”, which corresponds to the id of the feature</p></li>
<li><p>The variable “typeName”, which corresponds to the name of the type of the feature</p></li>
<li><p>A sequence of variables corresponding to feature attributes, each named the same name as the attribute</p></li>
</ul>
<p>So with this knowledge in hand let us come up with some more examples:</p>
<p>Simple fid/typename access:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>This is feature ${fid} of type ${typeName}.
</pre></div>
</div>
<p>This is a feature of 3.1 of type states.</p>
<div class="figure align-center" id="id6">
<img alt="../../../../../_images/fid.png" src="../../../../../_images/fid.png" />
<p class="caption"><span class="caption-text"><em>FID</em></span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>Access to the values of two attributes named <code class="docutils literal notranslate"><span class="pre">STATE_NAME</span></code>, and <code class="docutils literal notranslate"><span class="pre">PERSONS</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>This is ${STATE_NAME.value} state which has a population of ${PERSONS.value}.
</pre></div>
</div>
<p>ID This is Idaho state which has a population of 1.006.749.</p>
<div class="figure align-center" id="id7">
<img alt="../../../../../_images/attributes.png" src="../../../../../_images/attributes.png" />
<p class="caption"><span class="caption-text"><em>Attributes</em></span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="attribute-variables">
<h2>Attribute Variables<a class="headerlink" href="#attribute-variables" title="Permalink to this headline">¶</a></h2>
<p>A feature attribute a “complex object” which is made up of three parts:</p>
<ol class="arabic simple">
<li><p><strong>A value</strong>, given as a default string representation of the actual attribute value feasible to be used directly</p></li>
<li><p><strong>A rawValue</strong>, being the actual value of the attribute, to allow for more specialized customization (for example, <code class="docutils literal notranslate"><span class="pre">${attribute.value?string(&quot;Enabled&quot;,</span> <span class="pre">&quot;Disabled&quot;)}</span></code> for custom representations of boolean attributes, etc).</p></li>
<li><p><strong>A type</strong>, each of which is accessible via <code class="docutils literal notranslate"><span class="pre">${&lt;attribute_name&gt;.name}</span></code>, <code class="docutils literal notranslate"><span class="pre">${&lt;attribute_name&gt;.value},</span> <span class="pre">${&lt;attribute_name&gt;.rawValue}</span></code>, <code class="docutils literal notranslate"><span class="pre">${&lt;attribute_name&gt;.type}</span></code> respectively. The other variables: fid, and typeName and are “simple objects” which are available directly.</p></li>
</ol>
</div>
<div class="section" id="wms-demo-example">
<h2>WMS Demo Example<a class="headerlink" href="#wms-demo-example" title="Permalink to this headline">¶</a></h2>
<p>We will base our final example off the “WMS Example” demo which ships with GeoServer. To check out the demo visit <a class="reference external" href="http://localhost:8080/geoserver/popup_map/index.html">http://localhost:8080/geoserver/popup_map/index.html</a> in your web browser.</p>
<p>You will notice that hovering the mouse over one of the points on the map displays an image specific to that point. Let us replicate this with a KML placemark description.</p>
<ol class="arabic">
<li><p>In the <code class="docutils literal notranslate"><span class="pre">featureTypes/DS_poi_poi</span></code> directory of the geoserver data directory create the following template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;http://localhost:8080/geoserver/popup_map/$</span><span class="si">{THUMBNAIL.value}</span><span class="s2">&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
</li>
<li><p>Add the following network link in Google Earth:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>http://localhost:8080/geoserver/wms/kml?layers=tiger:poi
</pre></div>
</div>
</li>
</ol>
<p>Poi.4</p>
<div class="figure align-center" id="id8">
<img alt="../../../../../_images/wmsexample.png" src="../../../../../_images/wmsexample.png" />
<p class="caption"><span class="caption-text"><em>WMS Example</em></span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="../index.html" title="previous chapter">Tutorials</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="../heights/heights.html" title="next chapter">Heights Templates</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">KML Placemark Templates</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li><a class="reference internal" href="#hello-world">Hello World</a></li>
<li><a class="reference internal" href="#data-content">Data Content</a></li>
<li><a class="reference internal" href="#attribute-variables">Attribute Variables</a></li>
<li><a class="reference internal" href="#wms-demo-example">WMS Demo Example</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="../index.html" title="previous chapter">Tutorials</a></li>
            <li>Next: <a href="../heights/heights.html" title="next chapter">Heights Templates</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/services/wms/googleearth/tutorials/kmlplacemark/index.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>