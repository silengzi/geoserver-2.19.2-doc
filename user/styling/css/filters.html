<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Filter syntax &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../_static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../index.html" />
      <link rel="up" title="CSS Styling" href="index.html" />
      <link rel="next" title="Metadata" href="metadata.html" />
      <link rel="prev" title="Tutorial: Styling data with CSS" href="tutorial.html" />
</head>
<body class="styling/css/filters">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Styling</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">CSS Styling</a> &raquo;</li>
  <li>Filter syntax</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="metadata.html" title="Metadata"
       accesskey="N">next</a>|</li>
  <li>
    <a href="tutorial.html" title="Tutorial: Styling data with CSS"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="filter-syntax">
<span id="css-filters"></span><h1>Filter syntax<a class="headerlink" href="#filter-syntax" title="Permalink to this headline">¶</a></h1>
<p>Filters limit the set of features affected by a rule’s properties.  There are
several types of simple filters, which can be combined to provide more complex
filters for rules.</p>
<div class="section" id="combining-filters">
<h2>Combining filters<a class="headerlink" href="#combining-filters" title="Permalink to this headline">¶</a></h2>
<p>Combination is done in the usual CSS way.  A rule with two filters separated by
a comma affects any features that match <em>either</em> filter, while a rule with
two filters separated by only whitespace affects only features that match
<em>both</em> filters.  Here’s an example using a basic attribute filter (described
below):</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="c">/* Matches places where the lake is flooding */</span>
<span class="o">[</span><span class="nt">rainfall</span><span class="o">&gt;</span><span class="nt">12</span><span class="o">]</span> <span class="o">[</span><span class="nt">lakes</span><span class="o">&gt;</span><span class="nt">1</span><span class="o">]</span> <span class="p">{</span>
    <span class="n">fill</span><span class="p">:</span> <span class="kc">black</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* Matches wet places */</span>
<span class="o">[</span><span class="nt">rainfall</span><span class="o">&gt;</span><span class="nt">12</span><span class="o">],</span> <span class="o">[</span><span class="nt">lakes</span><span class="o">&gt;</span><span class="nt">1</span><span class="o">]</span> <span class="p">{</span>
    <span class="n">fill</span><span class="p">:</span> <span class="kc">blue</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When writing a selector that uses both <em>and</em> and <em>or</em> combinators, remember that the <em>and</em>
combinator has higher precedence. For example:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">restricted</span> <span class="o">[</span><span class="nt">cat</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="o">],</span> <span class="o">[</span><span class="nt">cat</span><span class="o">=</span><span class="s1">&#39;3&#39;</span><span class="o">],</span> <span class="o">[</span><span class="nt">cat</span><span class="o">=</span><span class="s1">&#39;4&#39;</span><span class="o">]</span> <span class="o">[</span><span class="p">@</span><span class="k">sd</span> <span class="o">&lt;=</span> <span class="nt">200k</span><span class="o">]</span> <span class="o">[</span><span class="p">@</span><span class="k">sd</span> <span class="o">&gt;</span> <span class="nt">100k</span><span class="o">]</span> <span class="p">{</span>
  <span class="nt">fill</span><span class="o">:</span> <span class="p">#</span><span class="nn">EE0000</span><span class="o">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above selector should be read as:</p>
<ul class="simple">
<li><p>typename is ‘restricted’ and <code class="docutils literal notranslate"><span class="pre">cat='2'</span></code> <em>or</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cat='3'</span></code> <em>or</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cat='4'</span></code> and scale is between 100000 and 200000</p></li>
</ul>
<p>If instead the intention was to combine in or just the three cat filters, the right syntax would
have been:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">restricted</span> <span class="o">[</span><span class="nt">cat</span><span class="o">=</span><span class="s1">&#39;2&#39;</span> <span class="nt">or</span> <span class="nt">cat</span><span class="o">=</span><span class="s1">&#39;3&#39;</span> <span class="nt">or</span> <span class="nt">cat</span><span class="o">=</span><span class="s1">&#39;4&#39;</span><span class="o">]</span> <span class="o">[</span><span class="p">@</span><span class="k">sd</span> <span class="o">&lt;=</span> <span class="nt">200k</span><span class="o">]</span> <span class="o">[</span><span class="p">@</span><span class="k">sd</span> <span class="o">&gt;</span> <span class="nt">100k</span><span class="o">]</span> <span class="p">{</span>
  <span class="nt">fill</span><span class="o">:</span> <span class="p">#</span><span class="nn">EE0000</span><span class="o">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Which should be read as:</p>
<ul class="simple">
<li><p>typename is ‘restricted’ <em>and</em></p></li>
<li><p>(<code class="docutils literal notranslate"><span class="pre">cat='2'</span></code> or <code class="docutils literal notranslate"><span class="pre">cat='3'</span></code> or <code class="docutils literal notranslate"><span class="pre">cat='4'</span></code>) <em>and</em></p></li>
<li><p>scale is between 100000 and 200000</p></li>
</ul>
</div>
<div class="section" id="filtering-on-data-attributes">
<h2>Filtering on data attributes<a class="headerlink" href="#filtering-on-data-attributes" title="Permalink to this headline">¶</a></h2>
<p>An attribute filter matches some attribute of the data (for example, a column
in a database table).  This is probably the most common type of filter.  An
attribute filter takes the form of an attribute name and a data value separated
by some predicate operator (such as the less-than operator <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>).</p>
<p>Supported predicate operators include the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">=</span></code></p></td>
<td><p>The property must be exactly <cite>equal</cite> to the specified value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;&gt;</span></code></p></td>
<td><p>The property must not be exactly equal to the specified value.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></td>
<td><p>The property must be greater than (or alphabetically later than) the
specified value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></p></td>
<td><p>The property must be greater than or equal to the specified value.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code></p></td>
<td><p>The property must be less than (or alphabetically earlier than) the
specified value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code></p></td>
<td><p>The property must be less than or equal to the specified value.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">LIKE</span></code></p></td>
<td><p>The property must match the pattern described by the specified value.
Patterns use <code class="docutils literal notranslate"><span class="pre">_</span></code> to indicate a single unspecified character and <code class="docutils literal notranslate"><span class="pre">%</span></code>
to indicate an unknown number of unspecified characters.</p></td>
</tr>
</tbody>
</table>
<p>For example, to only render outlines for the states whose names start with
letters in the first half of the alphabet,  the rule would look like:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="nt">STATE_NAME</span><span class="o">&lt;=</span><span class="s1">&#39;M&#39;</span><span class="o">]</span> <span class="p">{</span>
    <span class="n">stroke</span><span class="p">:</span> <span class="kc">black</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current implementation of property filters uses ECQL syntax, described
on the <a class="reference external" href="https://docs.geotools.org/latest/userguide/library/cql/index.html">GeoTools documentation</a>.</p>
</div>
</div>
<div class="section" id="filtering-on-type">
<h2>Filtering on type<a class="headerlink" href="#filtering-on-type" title="Permalink to this headline">¶</a></h2>
<p>When dealing with data from multiple sources, it may be useful to provide rules
that only affect one of those sources.  This is done very simply; just specify
the name of the layer as a filter:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">states</span> <span class="p">{</span>
    <span class="n">stroke</span><span class="p">:</span> <span class="kc">black</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="filtering-by-id">
<h2>Filtering by ID<a class="headerlink" href="#filtering-by-id" title="Permalink to this headline">¶</a></h2>
<p>For layers that provide feature-level identifiers, you can style specific
features simply by specifying the ID.  This is done by prefixing the ID with a
hash sign (<code class="docutils literal notranslate"><span class="pre">#</span></code>):</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">#</span><span class="nn">states</span><span class="p">.</span><span class="nc">2</span> <span class="p">{</span>
    <span class="n">stroke</span><span class="p">:</span> <span class="kc">black</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In CSS, the <code class="docutils literal notranslate"><span class="pre">.</span></code> character is not allowed in element ids; and the
<code class="docutils literal notranslate"><span class="pre">#states.foo</span></code> selector matches the element with id <code class="docutils literal notranslate"><span class="pre">states</span></code> only if it also
has the class <code class="docutils literal notranslate"><span class="pre">foo</span></code>.  Since this form of identifier comes up so frequently in
GeoServer layers, the CSS module deviates from standard CSS slightly in this
regard.  Future revisions may use some form of munging to avoid this deviation.</p>
</div>
</div>
<div class="section" id="filtering-by-rendering-context-scale">
<h2>Filtering by rendering context (scale)<a class="headerlink" href="#filtering-by-rendering-context-scale" title="Permalink to this headline">¶</a></h2>
<p>Often, there are aspects of a map that should change based on the context in
which it is being viewed.  For example, a road map might omit residential roads
when being viewed at the state level, but feature them prominently at the
neighborhood level.  Details such as scale level are presented as
pseudo-attributes; they look like property filters, but the property names
start with an <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> symbol:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="nt">roadtype</span> <span class="o">=</span> <span class="s1">&#39;Residential&#39;</span><span class="o">][</span><span class="p">@</span><span class="k">sd</span> <span class="o">&gt;</span> <span class="nt">100k</span><span class="o">]</span> <span class="p">{</span>
    <span class="nt">stroke</span><span class="o">:</span> <span class="nt">black</span><span class="o">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The context details that are provided are as follows:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Pseudo-Attribute</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&#64;sd</p></td>
<td><p>The scale denominator for the current rendering.  More explicitly, this
is the ratio of real-world distance to screen/rendered distance.</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;scale</p></td>
<td><p>Same as above, the scale denominator (not scale) for the current rendering.
Supported for backwards compatibility</p></td>
</tr>
</tbody>
</table>
<p>The scale value can be expressed as a plain number, for for brevity and readability
the suffixes k (kilo), M (mega), G (giga) can be used, for example:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="p">@</span><span class="k">sd</span> <span class="o">&gt;</span> <span class="nt">100k</span><span class="o">]</span>
<span class="o">[</span><span class="p">@</span><span class="k">sd</span> <span class="o">&lt;</span> <span class="nt">12M</span><span class="o">]</span>
<span class="o">[</span><span class="p">@</span><span class="k">sd</span> <span class="o">&lt;</span> <span class="nt">1G</span><span class="o">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While property filters (currently) use the more complex ECQL syntax,
pseudo-attributes cannot use complex expressions and MUST take the form of
&lt;PROPERTY&gt;&lt;OPERATOR&gt;&lt;LITERAL&gt;.</p>
</div>
</div>
<div class="section" id="filtering-symbols">
<h2>Filtering symbols<a class="headerlink" href="#filtering-symbols" title="Permalink to this headline">¶</a></h2>
<p>When using symbols to create graphics inline, you may want to apply some
styling options to them.  You can specify style attributes for built-in symbols by using a few special selectors:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>PseudoSelector</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">:mark</span></code></p></td>
<td><p>specifies that a rule applies to symbols used as point markers</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">:stroke</span></code></p></td>
<td><p>specifies that a rule applies to symbols used as stroke patterns</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">:fill</span></code></p></td>
<td><p>specifies that a rule applies to symbols used as fill patterns</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">:symbol</span></code></p></td>
<td><p>specifies that a rule applies to any symbol, regardless of which
context it is used in</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">:nth-mark(n)</span></code></p></td>
<td><p>specifies that a rule applies to the symbol used for the nth stacked
point marker on a feature.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">:nth-stroke(n)</span></code></p></td>
<td><p>specifies that a rule applies to the symbol used for the nth stacked
stroke pattern on a feature.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">:nth-fill(n)</span></code></p></td>
<td><p>specifies that a rule applies to the symbol used for the nth stacked
fill pattern on a feature.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">:nth-symbol(n)</span></code></p></td>
<td><p>specifies that a rule applies to the symbol used for the nth stacked
symbol on a feature, regardless of which context it is used in.</p></td>
</tr>
</tbody>
</table>
<p>For more discussion on using these selectors, see <a class="reference internal" href="styledmarks.html#css-styledmarks"><span class="std std-ref">Styled marks</span></a>.</p>
</div>
<div class="section" id="global-rules">
<h2>Global rules<a class="headerlink" href="#global-rules" title="Permalink to this headline">¶</a></h2>
<p>Sometimes it is useful to have a rule that matches all features, for example,
to provide some default styling for your map (remember, by default nothing is
rendered).  This is accomplished using a single asterisk <code class="docutils literal notranslate"><span class="pre">*</span></code> in place of
the usual filter.  This catch-all rule can be used in complex expressions,
which may be useful if you want a rule to provide defaults as well as
overriding values for some features:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="p">{</span>
    <span class="n">stroke</span><span class="p">:</span> <span class="kc">black</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="tutorial.html" title="previous chapter">Tutorial: Styling data with CSS</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="metadata.html" title="next chapter">Metadata</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Filter syntax</a><ul>
<li><a class="reference internal" href="#combining-filters">Combining filters</a></li>
<li><a class="reference internal" href="#filtering-on-data-attributes">Filtering on data attributes</a></li>
<li><a class="reference internal" href="#filtering-on-type">Filtering on type</a></li>
<li><a class="reference internal" href="#filtering-by-id">Filtering by ID</a></li>
<li><a class="reference internal" href="#filtering-by-rendering-context-scale">Filtering by rendering context (scale)</a></li>
<li><a class="reference internal" href="#filtering-symbols">Filtering symbols</a></li>
<li><a class="reference internal" href="#global-rules">Global rules</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="tutorial.html" title="previous chapter">Tutorial: Styling data with CSS</a></li>
            <li>Next: <a href="metadata.html" title="next chapter">Metadata</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/styling/css/filters.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>