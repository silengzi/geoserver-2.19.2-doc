<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>4.5. Rasters &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../../static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../../static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../../static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../../static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../../static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../../static/jquery.js"></script>
  <script type="text/javascript" src="../../../static/doctools.js"></script>
  <script type="text/javascript" src="../../../static/searchtools.js"></script>
  <script type="text/javascript" src="../../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../../static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../../index.html" />
      <link rel="up" title="4. YSLD Styling Workbook" href="index.html" />
      <link rel="next" title="4.6. YSLD Workbook Conclusion" href="done.html" />
      <link rel="prev" title="4.4. Points" href="point.html" />
</head>
<body class="styling/workshop/ysld/raster">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../../static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../../index.html" accesskey="U">Styling</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Styling Workshop</a> &raquo;</li>
  <li><a href="index.html" accesskey="U"><span class="section-number">4. </span>YSLD Styling Workbook</a> &raquo;</li>
  <li>4.5. Rasters</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="done.html" title="4.6. YSLD Workbook Conclusion"
       accesskey="N">next</a>|</li>
  <li>
    <a href="point.html" title="4.4. Points"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="rasters">
<span id="styling-workshop-raster"></span><h1><span class="section-number">4.5. </span>Rasters<a class="headerlink" href="#rasters" title="Permalink to this headline">¶</a></h1>
<p>Finally we will look at using YSLD styling for the portrayal of raster data.</p>
<div class="figure align-default" id="id1">
<img alt="../../../images/RasterSymbology2.svg" src="../../../images/RasterSymbology2.svg" /><p class="caption"><span class="caption-text">Raster Symbology</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>Review of raster symbology:</p>
<ul>
<li><p>Raster data is <strong>Grid Coverage</strong> where values have been recorded in a regular array. In OGC terms a <strong>Coverage</strong> can be used to look up a value or measurement for each location.</p></li>
<li><p>When queried with a “sample” location:</p>
<ul class="simple">
<li><p>A grid coverage can determine the appropriate array location and retrieve a value. Different techniques may be used interpolate an appropriate value from several measurements (higher quality) or directly return the “nearest neighbor” (faster).</p></li>
<li><p>A vector coverages would use a point-in-polygon check and return an appropriate attribute value.</p></li>
<li><p>A scientific model can calculate a value for each sample location</p></li>
</ul>
</li>
<li><p>Many raster formats organize information into bands of content. Values recorded in these bands and may be mapped into colors for display (a process similar to theming an attribute for vector data).</p>
<p>For imagery the raster data is already formed into red, green and blue bands for display.</p>
</li>
<li><p>As raster data has no inherent shape, the format is responsible for describing the orientation and location of the grid used to record measurements.</p></li>
</ul>
<p>These raster examples use a digital elevation model consisting of a single band of height measurements. The imagery examples use an RGB image that has been hand coloured for use as a base map.</p>
<p>Reference:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../ysld/reference/index.html#ysld-reference"><span class="std std-ref">YSLD Reference</span></a></p></li>
<li><p><a class="reference internal" href="../../ysld/reference/symbolizers/raster.html#ysld-reference-symbolizers-raster"><span class="std std-ref">Raster</span></a> (YSLD Reference | Raster symbolizer)</p></li>
<li><p><a class="reference internal" href="../../sld/reference/rastersymbolizer.html#sld-reference-rastersymbolizer"><span class="std std-ref">Raster</span></a> (User Manual | SLD Reference )</p></li>
</ul>
<p>The exercise makes use of the <code class="docutils literal notranslate"><span class="pre">usgs:dem</span></code> and <code class="docutils literal notranslate"><span class="pre">ne:ne1</span></code> layers.</p>
<div class="section" id="image">
<h2><span class="section-number">4.5.1. </span>Image<a class="headerlink" href="#image" title="Permalink to this headline">¶</a></h2>
<p>The <strong>raster</strong> symbolizer controls the display of raster data. By default, the raster symbolizer automatically selects the appropriate red, green and blue channels for display.</p>
<ol class="arabic">
<li><p>Navigate to the <strong>Styles</strong> page.</p></li>
<li><p>Click <span class="guilabel">Add a new style</span> and choose the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Name:</p></td>
<td><p><kbd class="kbd docutils literal notranslate">image_example</kbd></p></td>
</tr>
<tr class="row-even"><td><p>Workspace:</p></td>
<td><p><kbd class="kbd docutils literal notranslate">No workspace</kbd></p></td>
</tr>
<tr class="row-odd"><td><p>Format:</p></td>
<td><p><kbd class="kbd docutils literal notranslate">YSLD</kbd></p></td>
</tr>
</tbody>
</table>
</li>
<li><p>Choose <span class="guilabel">raster</span> from the <code class="docutils literal notranslate"><span class="pre">Generate</span> <span class="pre">a</span> <span class="pre">default</span> <span class="pre">style</span></code> dropdown and click <span class="guilabel">generate</span>.</p></li>
<li><p>Replace the initial YSLD definition with:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
</pre></div>
</div>
</li>
<li><p>And use the <span class="guilabel">Layer Preview</span> tab to preview the result.</p>
<img alt="../../../images/raster_image_12.png" src="../../../images/raster_image_12.png" />
</li>
<li><p>The <strong>channels</strong> property can be used to provide a list three band numbers (for images recording in several wave lengths) or a single band number can be used to view a grayscale image.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="hll">    <span class="nt">channels</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">gray</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;2&#39;</span>
</span></pre></div>
</div>
</li>
<li><p>Isolating just the green band (it wil be drawn as a grayscale image):</p>
<img alt="../../../images/raster_image_21.png" src="../../../images/raster_image_21.png" />
</li>
</ol>
</div>
<div class="section" id="dem">
<h2><span class="section-number">4.5.2. </span>DEM<a class="headerlink" href="#dem" title="Permalink to this headline">¶</a></h2>
<p>A digital elevation model is an example of raster data made up of measurements, rather than color information.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">usgs:dem</span></code> layer used used for this exercise:</p>
<ol class="arabic">
<li><p>Return to the the <strong>Styles</strong> page.</p></li>
<li><p>Click <span class="guilabel">Add a new style</span> and choose the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Name:</p></td>
<td><p><kbd class="kbd docutils literal notranslate">raster_example</kbd></p></td>
</tr>
<tr class="row-even"><td><p>Workspace:</p></td>
<td><p><kbd class="kbd docutils literal notranslate">No workspace</kbd></p></td>
</tr>
<tr class="row-odd"><td><p>Format:</p></td>
<td><p><kbd class="kbd docutils literal notranslate">YSLD</kbd></p></td>
</tr>
</tbody>
</table>
</li>
<li><p>Choose <span class="guilabel">raster</span> from the <code class="docutils literal notranslate"><span class="pre">Generate</span> <span class="pre">a</span> <span class="pre">default</span> <span class="pre">style</span></code> dropdown and click <span class="guilabel">generate</span>.</p></li>
<li><p>The rendering engine will select our single band of raster content, and do its best to map these values into a grayscale image. Replace the content of the style with:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
</pre></div>
</div>
</li>
<li><p>Use the <span class="guilabel">Layer Preview</span> tab to preview the result. The range produced in this case from the highest and lowest values.</p>
<img alt="../../../images/raster_dem_12.png" src="../../../images/raster_dem_12.png" />
</li>
<li><p>We can use a bit of image processing to emphasis the generated color mapping by making use of <strong>contrast-enhancement</strong>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="hll">    <span class="nt">channels</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">gray</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">name</span><span class="p">:</span> <span class="s">&#39;1&#39;</span>
</span><span class="hll">        <span class="nt">contrast-enhancement</span><span class="p">:</span>
</span><span class="hll">          <span class="nt">mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">histogram</span>
</span></pre></div>
</div>
</li>
<li><p>Image processing of this sort should be used with caution as it does distort the presentation (in this case making the landscape look more varied then it is in reality.</p>
<img alt="../../../images/raster_dem_21.png" src="../../../images/raster_dem_21.png" />
</li>
</ol>
<div class="section" id="color-map">
<h3><span class="section-number">4.5.2.1. </span>Color Map<a class="headerlink" href="#color-map" title="Permalink to this headline">¶</a></h3>
<p>The approach of mapping a data channel directly to a color channel is only suitable to quickly look at quantitative data.</p>
<p>For qualitative data (such as land use) or simply to use color, we need a different approach:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We can use a color map to artificially color a single band raster introducing smooth graduations for elevation or tempurature models or clear differentiation for qualitative data.</p>
</div>
<ol class="arabic">
<li><p>Apply the following YAML to our <cite>usgs:DEM</cite> layer:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="hll">    <span class="nt">color-map</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ramp</span>
</span><span class="hll">      <span class="nt">entries</span><span class="p">:</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#9080DB&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">0</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#008000&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">1</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#105020&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">255</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#FFFFFF&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">4000</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span></pre></div>
</div>
</li>
<li><p>Resulting in this artificial color image:</p>
<img alt="../../../images/raster_dem_31.png" src="../../../images/raster_dem_31.png" />
</li>
<li><p>An opacity value can also be used with each <strong>color-map</strong> entry.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
    <span class="nt">color-map</span><span class="p">:</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ramp</span>
      <span class="nt">entries</span><span class="p">:</span>
<span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#9080DB&#39;</span><span class="p p-Indicator">,</span> <span class="nv">0.0</span><span class="p p-Indicator">,</span> <span class="nv">0</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span>      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#008000&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">1</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#105020&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">255</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#FFFFFF&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">4000</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</li>
<li><p>Allowing the areas of zero height to be transparent:</p>
<img alt="../../../images/raster_dem_41.png" src="../../../images/raster_dem_41.png" />
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Raster format for GIS work often supply a “no data” value, or contain a mask, limiting the dataset to only the locations with valid information.</p>
</div>
</div>
<div class="section" id="custom">
<h3><span class="section-number">4.5.2.2. </span>Custom<a class="headerlink" href="#custom" title="Permalink to this headline">¶</a></h3>
<p>We can use what we have learned about color maps to apply a color brewer palette to our data.</p>
<p>This exploration focuses on accurately communicating differences in value, rather than strictly making a pretty picture. Care should be taken to consider the target audience and medium used during palette selection.</p>
<ol class="arabic">
<li><p>Restore the <code class="docutils literal notranslate"><span class="pre">raster_example</span></code> YSLD style to the following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
</pre></div>
</div>
</li>
<li><p>Producing the following map preview.</p>
<img alt="../../../images/raster_01_auto1.png" src="../../../images/raster_01_auto1.png" />
</li>
<li><p>To start with we can provide our own grayscale using two color map entries.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="hll">    <span class="nt">color-map</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ramp</span>
</span><span class="hll">      <span class="nt">entries</span><span class="p">:</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#000000&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">0</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#FFFFFF&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">4000</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span></pre></div>
</div>
</li>
<li><p>Use the <span class="guilabel">Layer Preview</span> tab to zoom in and take a look.</p>
<p>This is much more direct representation of the source data. We have used our knowledge of elevations to construct a more accurate style.</p>
<img alt="../../../images/raster_02_straight1.png" src="../../../images/raster_02_straight1.png" />
</li>
<li><p>While our straightforward style is easy to understand, it does leave a bit to be desired with respect to clarity.</p>
<p>The eye has a hard time telling apart dark shades of black (or bright shades of white) and will struggle to make sense of this image. To address this limitation we are going to switch to the ColorBrewer <strong>9-class PuBuGn</strong> palette. This is a sequential palette that has been hand tuned to communicate a steady change of values.</p>
<img alt="../../../images/raster_03_elevation1.png" src="../../../images/raster_03_elevation1.png" />
</li>
<li><p>Update your style with the following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
    <span class="nt">color-map</span><span class="p">:</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ramp</span>
      <span class="nt">entries</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#014636&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">0</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
<span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#016C59&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">500</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#02818A&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">1000</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#3690C0&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">1500</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#67A9CF&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">2000</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#A6BDDB&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">2500</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#D0D1E6&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">3000</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#ECE2F0&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">3500</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#FFF7FB&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">4000</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span></pre></div>
</div>
<img alt="../../../images/raster_04_PuBuGn1.png" src="../../../images/raster_04_PuBuGn1.png" />
</li>
<li><p>A little bit of work with alpha (to mark the ocean as a no-data section):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
    <span class="nt">color-map</span><span class="p">:</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ramp</span>
      <span class="nt">entries</span><span class="p">:</span>
<span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#014636&#39;</span><span class="p p-Indicator">,</span> <span class="nv">0</span><span class="p p-Indicator">,</span> <span class="nv">0</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#014636&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">1</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</span>      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#016C59&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">500</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#02818A&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">1000</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#3690C0&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">1500</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#67A9CF&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">2000</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#A6BDDB&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">2500</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#D0D1E6&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">3000</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#ECE2F0&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">3500</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span><span class="s">&#39;#FFF7FB&#39;</span><span class="p p-Indicator">,</span> <span class="nv">1.0</span><span class="p p-Indicator">,</span> <span class="nv">4000</span><span class="p p-Indicator">,</span> <span class="nv">null</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</li>
<li><p>And we are done:</p>
<img alt="../../../images/raster_05_alpha1.png" src="../../../images/raster_05_alpha1.png" />
</li>
</ol>
</div>
<div class="section" id="bonus">
<h3><span class="section-number">4.5.2.3. </span>Bonus<a class="headerlink" href="#bonus" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="explore-contrast-enhancement">
<span id="ysld-raster-q1"></span><h2><span class="section-number">4.5.3. </span>Explore Contrast Enhancement<a class="headerlink" href="#explore-contrast-enhancement" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>A special effect that is effective with grayscale information is automatic contrast adjustment.</p></li>
<li><p>Make use of a simple contrast enhancement with <code class="docutils literal notranslate"><span class="pre">usgs:dem</span></code>:</p></li>
</ol>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
    <span class="nt">contrast-enhancement</span><span class="p">:</span>
      <span class="nt">mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">normalize</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic">
<li><p>Can you explain what happens when zoom in to only show a land area (as indicated with the bounding box below)?</p>
<img alt="../../../images/raster_contrast_11.png" src="../../../images/raster_contrast_11.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Discussion <a class="reference internal" href="done.html#ysld-raster-a1"><span class="std std-ref">provided</span></a> at the end of the workbook.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="challenge-intervals">
<span id="ysld-raster-q2"></span><h2><span class="section-number">4.5.4. </span>Challenge Intervals<a class="headerlink" href="#challenge-intervals" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>The color-map <strong>type</strong> property dictates how the values are used to generate a resulting color.</p>
<ul class="simple">
<li><p><kbd class="kbd docutils literal notranslate">ramp</kbd> is used for quantitative data, providing a smooth interpolation between the provided color values.</p></li>
<li><p><kbd class="kbd docutils literal notranslate">intervals</kbd> provides categorization for quantitative data, assigning each range of values a solid color.</p></li>
<li><p><kbd class="kbd docutils literal notranslate">values</kbd> is used for qualitative data, each value is required to have a <strong>color-map</strong> entry or it will not be displayed.</p></li>
</ul>
</li>
<li><p><strong>Chalenge:</strong> Update your DEM example to use <strong>intervals</strong> for presentation. What are the advantages of using this approach for elevation data?</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Answer <a class="reference internal" href="done.html#ysld-raster-a2"><span class="std std-ref">provided</span></a> at the end of the workbook.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="explore-image-processing">
<h2><span class="section-number">4.5.5. </span>Explore Image Processing<a class="headerlink" href="#explore-image-processing" title="Permalink to this headline">¶</a></h2>
<p>Additional properties are available to provide slight image processing during visualization.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this section are we going to be working around a preview issue where only the top left corner of the raster remains visible during image processing. This issue has been reported as  <a class="reference external" href="https://osgeo-org.atlassian.net/browse/GEOS-6213">GEOS-6213</a>.</p>
</div>
<p>Image processing can be used to enhance the output to highlight small details or to balance images from different sensors allowing them to be compared.</p>
<ol class="arabic simple">
<li><p>The <strong>contrast-enhancement</strong> property is used to turn on a range of post processing effects. Settings are provided for <kbd class="kbd docutils literal notranslate">normalize</kbd> or <kbd class="kbd docutils literal notranslate">histogram</kbd> or <kbd class="kbd docutils literal notranslate">none</kbd>;</p></li>
</ol>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
    <span class="nt">contrast-enhancement</span><span class="p">:</span>
      <span class="nt">mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">normalize</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic">
<li><p>Producing the following image:</p>
<img alt="../../../images/raster_image_31.png" src="../../../images/raster_image_31.png" />
</li>
<li><p>The <strong>raster-gamma</strong> property is used adjust the brightness of <strong>contrast-enhancement</strong> output. Values less than 1 are used to brighten the image while values greater than 1 darken the image.</p></li>
</ol>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">symbolizers</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">raster</span><span class="p">:</span>
    <span class="nt">opacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0</span>
    <span class="nt">contrast-enhancement</span><span class="p">:</span>
      <span class="nt">gamma</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.5</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic">
<li><p>Providing the following effect:</p>
<img alt="../../../images/raster_image_41.png" src="../../../images/raster_image_41.png" />
</li>
</ol>
</div>
<div class="section" id="challenge-clear-digital-elevation-model-presentation">
<span id="ysld-raster-q3"></span><h2><span class="section-number">4.5.6. </span>Challenge Clear Digital Elevation Model Presentation<a class="headerlink" href="#challenge-clear-digital-elevation-model-presentation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Now that you have seen the data on screen and have a better understanding how would you modify our initial gray-scale example?</p></li>
<li><p><strong>Challenge:</strong> Use what you have learned to present the <code class="docutils literal notranslate"><span class="pre">usgs:dem</span></code> clearly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Answer <a class="reference internal" href="done.html#ysld-raster-a3"><span class="std std-ref">provided</span></a> at the end of the workbook.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="challenge-raster-opacity">
<span id="ysld-raster-q4"></span><h2><span class="section-number">4.5.7. </span>Challenge Raster Opacity<a class="headerlink" href="#challenge-raster-opacity" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>There is a quick way to make raster data transparent, raster <strong>opacity</strong> property works in the same fashion as with vector data. The raster as a whole will be drawn partially transparent allow content from other layers to provide context.</p></li>
<li><p><strong>Challenge:</strong> Can you think of an example where this would be useful?</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Discussion <a class="reference internal" href="done.html#ysld-raster-a4"><span class="std std-ref">provided</span></a> at the end of the workbook.</p>
</div>
</li>
</ol>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="point.html" title="previous chapter"><span class="section-number">4.4. </span>Points</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="done.html" title="next chapter"><span class="section-number">4.6. </span>YSLD Workbook Conclusion</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">4.5. Rasters</a><ul>
<li><a class="reference internal" href="#image">4.5.1. Image</a></li>
<li><a class="reference internal" href="#dem">4.5.2. DEM</a><ul>
<li><a class="reference internal" href="#color-map">4.5.2.1. Color Map</a></li>
<li><a class="reference internal" href="#custom">4.5.2.2. Custom</a></li>
<li><a class="reference internal" href="#bonus">4.5.2.3. Bonus</a></li>
</ul>
</li>
<li><a class="reference internal" href="#explore-contrast-enhancement">4.5.3. Explore Contrast Enhancement</a></li>
<li><a class="reference internal" href="#challenge-intervals">4.5.4. Challenge Intervals</a></li>
<li><a class="reference internal" href="#explore-image-processing">4.5.5. Explore Image Processing</a></li>
<li><a class="reference internal" href="#challenge-clear-digital-elevation-model-presentation">4.5.6. Challenge Clear Digital Elevation Model Presentation</a></li>
<li><a class="reference internal" href="#challenge-raster-opacity">4.5.7. Challenge Raster Opacity</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="point.html" title="previous chapter"><span class="section-number">4.4. </span>Points</a></li>
            <li>Next: <a href="done.html" title="next chapter"><span class="section-number">4.6. </span>YSLD Workbook Conclusion</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/styling/workshop/ysld/raster.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>