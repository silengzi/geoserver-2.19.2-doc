<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>5.2. Lines &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../../_static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../../index.html" />
      <link rel="up" title="5. MBStyle Styling Workbook" href="index.html" />
      <link rel="next" title="5.3. Polygons" href="polygon.html" />
      <link rel="prev" title="5.1. MBStyle Quickstart" href="mbstyle.html" />
</head>
<body class="styling/workshop/mbstyle/linestring">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../../index.html" accesskey="U">Styling</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Styling Workshop</a> &raquo;</li>
  <li><a href="index.html" accesskey="U"><span class="section-number">5. </span>MBStyle Styling Workbook</a> &raquo;</li>
  <li>5.2. Lines</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="polygon.html" title="5.3. Polygons"
       accesskey="N">next</a>|</li>
  <li>
    <a href="mbstyle.html" title="5.1. MBStyle Quickstart"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="lines">
<span id="styling-workshop-mbstyle-line"></span><h1><span class="section-number">5.2. </span>Lines<a class="headerlink" href="#lines" title="Permalink to this headline">¶</a></h1>
<p>We will start our tour of MBStyle styling by looking at the representation of lines.</p>
<div class="figure align-default" id="id1">
<img alt="../../../_images/LineSymbology1.svg" src="../../../_images/LineSymbology1.svg" /><p class="caption"><span class="caption-text">LineString Geometry</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>Review of line symbology:</p>
<ul class="simple">
<li><p>Lines can be used to represent either abstract concepts with length but not width such as networks and boundaries, or long thin features with a didth that is too smallt o represent on the map. This means that <strong>the visual width of line symbols do not normally change depending on scale.</strong></p></li>
<li><p>Lines are recorded as LineStrings or Curves depending on the geometry model used.</p></li>
<li><p>SLD uses a <strong>LineSymbolizer</strong> to record how the shape of a line is drawn. The primary characteristic documented is the <strong>Stroke</strong> used to draw each segment between vertices.</p></li>
<li><p>Labeling of line work is anchored to the mid-point of the line. GeoServer provides a vendor option to allow label rotation aligned with line segments.</p></li>
</ul>
<p>For our exercises we are going to be using simple MBStyle documents, often consisting of a single layer, in order to focus on the properties used for line symbology.</p>
<p>Each exercise makes use of the <code class="docutils literal notranslate"><span class="pre">ne:roads</span></code> layer.</p>
<p>Reference:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../mbstyle/reference/index.html#mbstyle-reference"><span class="std std-ref">MBStyle Reference</span></a></p></li>
<li><p><a class="reference external" href="https://www.mapbox.com/mapbox-gl-js/style-spec/#layers-line">MapBox Style Spec Line Layer</a></p></li>
<li><p><a class="reference internal" href="../../sld/reference/linesymbolizer.html#sld-reference-linesymbolizer"><span class="std std-ref">LineString</span></a> (User Manual | SLD Reference )</p></li>
</ul>
<div class="section" id="line">
<h2><span class="section-number">5.2.1. </span>Line<a class="headerlink" href="#line" title="Permalink to this headline">¶</a></h2>
<p>A line layer is represented by the <kbd class="kbd docutils literal notranslate">line</kbd> type.</p>
<div class="figure align-default" id="id2">
<img alt="../../../_images/LineStringStroke.svg" src="../../../_images/LineStringStroke.svg" /><p class="caption"><span class="caption-text">Basic Stroke Properties</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<ol class="arabic">
<li><p>Navigate to the <strong>Styles</strong> page.</p></li>
<li><p>Click <span class="guilabel">Add a new style</span> and choose the following:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p>New style name:</p></th>
<td><p><kbd class="kbd docutils literal notranslate">line_example</kbd></p></td>
</tr>
<tr class="row-even"><th class="stub"><p>Workspace for new layer:</p></th>
<td><p>Leave blank</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p>Format:</p></th>
<td><p><kbd class="kbd docutils literal notranslate">MBStyle</kbd></p></td>
</tr>
</tbody>
</table>
</li>
<li><p>Fill in the style editor</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
          <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Click <span class="guilabel">Apply</span></p></li>
<li><p>Click <span class="guilabel">Layer Preview</span> to see your new style applied to a layer.</p>
<p>You can use this tab to follow along as the style is edited, it will refresh each time <span class="guilabel">Apply</span> is pressed.</p>
<img alt="../../../_images/line1.png" src="../../../_images/line1.png" />
</li>
<li><p>You can see the equivalent SLD by requesting <kbd class="kbd docutils literal notranslate">http://localhost:8080/geoserver/rest/styles/line_example.sld?pretty=true</kbd> which will currently show the default line symbolizer we created.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="nt">&lt;sld:StyledLayerDescriptor</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.opengis.net/sld&quot;</span> <span class="na">xmlns:sld=</span><span class="s">&quot;http://www.opengis.net/sld&quot;</span> <span class="na">xmlns:gml=</span><span class="s">&quot;http://www.opengis.net/gml&quot;</span> <span class="na">xmlns:ogc=</span><span class="s">&quot;http://www.opengis.net/ogc&quot;</span> <span class="na">version=</span><span class="s">&quot;1.0.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;sld:NamedLayer&gt;</span>
    <span class="nt">&lt;sld:Name&gt;</span>line_example<span class="nt">&lt;/sld:Name&gt;</span>
    <span class="nt">&lt;sld:UserStyle&gt;</span>
      <span class="nt">&lt;sld:Name&gt;</span>line_example<span class="nt">&lt;/sld:Name&gt;</span>
      <span class="nt">&lt;sld:FeatureTypeStyle&gt;</span>
        <span class="nt">&lt;sld:Name&gt;</span>name<span class="nt">&lt;/sld:Name&gt;</span>
        <span class="nt">&lt;sld:Rule&gt;</span>
          <span class="nt">&lt;sld:LineSymbolizer/&gt;</span>
        <span class="nt">&lt;/sld:Rule&gt;</span>
      <span class="nt">&lt;/sld:FeatureTypeStyle&gt;</span>
    <span class="nt">&lt;/sld:UserStyle&gt;</span>
  <span class="nt">&lt;/sld:NamedLayer&gt;</span>
<span class="nt">&lt;/sld:StyledLayerDescriptor&gt;</span>
</pre></div>
</div>
</li>
</ol>
<p>We only specified the line layer, so all of the boilerplate arround was generated for us.</p>
<ol class="arabic">
<li><p>Additional properties cane be used fine-tune appearance. Use <strong>line-color</strong> to specify the colour and width of the line.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="hll">    <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span>
</span>  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>line-width</strong> lets us make the line wider</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
<span class="hll">    <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span>
</span>  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>line-dasharray</strong> applies a dot dash pattern.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
    <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="hll">    <span class="nt">&quot;line-dasharray&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</span>  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Check the <span class="guilabel">Map</span> tab to preview the result.</p>
<img alt="../../../_images/line_stroke1.png" src="../../../_images/line_stroke1.png" />
</li>
</ol>
</div>
<div class="section" id="multiple-layers">
<h2><span class="section-number">5.2.2. </span>Multiple Layers<a class="headerlink" href="#multiple-layers" title="Permalink to this headline">¶</a></h2>
<p>Providing two strokes is often used to provide a contrasting edge (called casing) to thick lines.  This can be created using two layers.</p>
<div class="figure align-default">
<img alt="../../../_images/LineStringZOrder.svg" src="../../../_images/LineStringZOrder.svg" /></div>
<ol class="arabic">
<li><p>Start by filling in a bit of boilerplate that we’ll be using</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8080E6&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Add a second layer to the rule</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
<span class="hll">      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_casing&quot;</span><span class="p">,</span>
</span><span class="hll">      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
</span><span class="hll">      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
</span><span class="hll">      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class="hll">        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
</span><span class="hll">      <span class="p">}</span>
</span>    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_center&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#8080E6&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The wider black line is first so it is drawn first, then the thinner blue line drawn second and so over top of the black line.  This is called the painter’s algorithm.</p>
<img alt="../../../_images/line_zorder_31.png" src="../../../_images/line_zorder_31.png" />
</li>
</ol>
</div>
<div class="section" id="label">
<h2><span class="section-number">5.2.3. </span>Label<a class="headerlink" href="#label" title="Permalink to this headline">¶</a></h2>
<p>Our next example is significant as it introduces how text labels are generated.</p>
<div class="figure align-default" id="id3">
<img alt="../../../_images/LineStringLabel.svg" src="../../../_images/LineStringLabel.svg" /><p class="caption"><span class="caption-text">Use of Label Property</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>This is also our first example making use of a dynamic style (where a value comes from an attribute from your data).</p>
<ol class="arabic">
<li><p>To enable LineString labeling we add a <kbd class="kbd docutils literal notranslate">symbol</kbd> layer with a <kbd class="kbd docutils literal notranslate">text-field</kbd>.</p>
<p>Update <code class="docutils literal notranslate"><span class="pre">line_example</span></code> with the following:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
<span class="hll">      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span>
</span><span class="hll">      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
</span><span class="hll">      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
</span><span class="hll">      <span class="nt">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class="hll">        <span class="nt">&quot;text-field&quot;</span><span class="p">:</span> <span class="s2">&quot;{name}&quot;</span>
</span><span class="hll">      <span class="p">}</span>
</span>    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>The SLD standard documents the default label position for each kind of Geometry. For LineStrings the initial label is positioned on the midway point of the line.</p>
<img alt="../../../_images/line_label_11.png" src="../../../_images/line_label_11.png" />
</li>
<li><p>We have used a feature property calculate a value for the label. The <strong>label</strong> is generated dynamically from the <kbd class="kbd docutils literal notranslate">name</kbd> attribute. Feature properties are supplied within curly braces, and must match the name of a property of the feature type.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span> <span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="nt">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="hll">        <span class="nt">&quot;text-field&quot;</span><span class="p">:</span> <span class="s2">&quot;{name}&quot;</span>
</span>      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Additional keys can be supplied to fine-tune label presentation:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="nt">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;text-field&quot;</span><span class="p">:</span> <span class="s2">&quot;{name}&quot;</span><span class="p">,</span>
<span class="hll">        <span class="nt">&quot;symbol-placement&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;text-offset&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">-8</span><span class="p">]</span>
</span>      <span class="p">}</span>
      <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="hll">        <span class="nt">&quot;text-color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span>
</span>      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>The <strong>text-color</strong> property is set to <kbd class="kbd docutils literal notranslate">black</kbd> to provide the colour of the text. Notice how this is a <strong>paint</strong> property, unlike all the others which are <strong>layout</strong> properties.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="nt">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;text-field&quot;</span><span class="p">:</span> <span class="s2">&quot;{name}&quot;</span><span class="p">,</span>
        <span class="nt">&quot;symbol-placement&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
        <span class="nt">&quot;text-offset&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">-8</span><span class="p">]</span>
      <span class="p">}</span>
      <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="hll">        <span class="nt">&quot;text-color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span>
</span>      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>The <strong>symbol-placement</strong> property is used to set how the label is placed with respect to the line.  By default it is <kbd class="kbd docutils literal notranslate">point</kbd> which casues the label to be placed next to the midpoint as it would be for a point feature.  When set to <kbd class="kbd docutils literal notranslate">line</kbd> it is placed along the line instead.  <strong>text-offset</strong> specifies how far from the anchor the label should be placed, in both the x and y directions.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="nt">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;text-field&quot;</span><span class="p">:</span> <span class="s2">&quot;{name}&quot;</span><span class="p">,</span>
<span class="hll">        <span class="nt">&quot;symbol-placement&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;text-offset&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">-8</span><span class="p">]</span>
</span>      <span class="p">}</span>
      <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;text-color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<img alt="../../../_images/line_label_21.png" src="../../../_images/line_label_21.png" />
</li>
</ol>
</div>
<div class="section" id="how-labeling-works">
<h2><span class="section-number">5.2.4. </span>How Labeling Works<a class="headerlink" href="#how-labeling-works" title="Permalink to this headline">¶</a></h2>
<p>The rendering engine collects all the generated labels during the rendering of each layer. Then, during labeling, the engine sorts through the labels performing collision avoidance (to prevent labels overlapping). Finally the rendering engine draws the labels on top of the map. Even with collision avoidance you can spot areas where labels are so closely spaced that the result is hard to read.</p>
<ol class="arabic">
<li><p>The parameter <strong>text-padding</strong> provides additional space around our label for use in collision avoidance.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="nt">&quot;layout&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;text-field&quot;</span><span class="p">:</span> <span class="s2">&quot;{name}&quot;</span><span class="p">,</span>
        <span class="nt">&quot;symbol-placement&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
        <span class="nt">&quot;text-offset&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">-8</span><span class="p">],</span>
<span class="hll">        <span class="nt">&quot;text-padding&quot;</span><span class="p">:</span> <span class="s2">&quot;10&quot;</span>
</span>      <span class="p">}</span>
      <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;text-color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Each label is now separated from its neighbor, improving legibility.</p>
<img alt="../../../_images/line_label_31.png" src="../../../_images/line_label_31.png" />
</li>
</ol>
</div>
<div class="section" id="zoom">
<h2><span class="section-number">5.2.5. </span>Zoom<a class="headerlink" href="#zoom" title="Permalink to this headline">¶</a></h2>
<p>This section explores the use of rules with filters and zoom restrictions.</p>
<ol class="arabic">
<li><p>Replace the <cite>line_example</cite> MBStyle definition with:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&lt;&quot;</span><span class="p">,</span> <span class="s2">&quot;scalerank&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>And use the <span class="guilabel">Map</span> tab to preview the result.</p>
<img alt="../../../_images/line_04_scalerank1.png" src="../../../_images/line_04_scalerank1.png" />
</li>
<li><p>The <strong>scalerank</strong> attribute is provided by the Natural Earth dataset to allow control of the level of detail based on scale. Our filter short-listed all content with scalerank 4 or lower, providing a nice quick preview when we are zoomed out.</p></li>
<li><p>In addition to testing feature attributes, selectors can also be used to check the state of the rendering engine.</p>
<p>Replace your MBStyle with the following:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_black&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;maxzoom&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_blue&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;minzoom&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>As you adjust the scale in the <span class="guilabel">Map</span> preview (using the mouse scroll wheel) the color will change between black and blue. You can read the current scale in the bottom right corner, and the legend will change to reflect the current style.</p>
<img alt="../../../_images/line_05_scale1.png" src="../../../_images/line_05_scale1.png" />
</li>
<li><p>Putting these two ideas together allows control of level detail based on scale:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;line_example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_else&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;scalerank&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
      <span class="nt">&quot;minzoom&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#888888&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_7&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;==&quot;</span><span class="p">,</span> <span class="s2">&quot;scalerank&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
      <span class="nt">&quot;minzoom&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#777777&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_6&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;==&quot;</span><span class="p">,</span> <span class="s2">&quot;scalerank&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
      <span class="nt">&quot;minzoom&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#444444&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_5_1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;==&quot;</span><span class="p">,</span> <span class="s2">&quot;scalerank&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
      <span class="nt">&quot;minzoom&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
      <span class="nt">&quot;maxzoom&quot;</span><span class="p">:</span> <span class="mi">7</span>
      <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#000055&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_5_2&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;==&quot;</span><span class="p">,</span> <span class="s2">&quot;scalerank&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
      <span class="nt">&quot;minzoom&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;#000055&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_5_1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="s2">&quot;scalerank&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
      <span class="nt">&quot;maxzoom&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_5_2&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="s2">&quot;scalerank&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
      <span class="nt">&quot;minzoom&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="nt">&quot;maxzoom&quot;</span><span class="p">:</span> <span class="mi">7</span>
      <span class="s2">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">2</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;line_5_4&quot;</span><span class="p">,</span>
      <span class="nt">&quot;source-layer&quot;</span><span class="p">:</span> <span class="s2">&quot;ne:roads&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span>
      <span class="nt">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="s2">&quot;scalerank&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
      <span class="nt">&quot;minzoom&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
      <span class="nt">&quot;paint&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;line-color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="nt">&quot;line-width&quot;</span><span class="p">:</span> <span class="mi">4</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>When a rule has both a filter and a scale, it will trigger when both are true.</p>
<img alt="../../../_images/line_06_adjust1.png" src="../../../_images/line_06_adjust1.png" />
</li>
</ol>
</div>
<div class="section" id="bonus">
<h2><span class="section-number">5.2.6. </span>Bonus<a class="headerlink" href="#bonus" title="Permalink to this headline">¶</a></h2>
<p>Finished early? Here are some opportunities to explore what we have learned, and extra challenges requiring creativity and research.</p>
<p>In a classroom setting please divide the challenges between teams (this allows us to work through all the material in the time available).</p>
<div class="section" id="challenge-classification">
<span id="mbstyle-line-q1"></span><h3><span class="section-number">5.2.6.1. </span>Challenge Classification<a class="headerlink" href="#challenge-classification" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>The roads <strong>type</strong> attribute provides classification information.</p>
<p>You can <strong>Layer Preview</strong> to inspect features to determine available values for type.</p>
</li>
<li><p><strong>Challenge:</strong> Create a new style adjust road appearance based on <strong>type</strong>.</p>
<img alt="../../../_images/line_type1.png" src="../../../_images/line_type1.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The available values are ‘Major Highway’,’Secondary Highway’,’Road’ and ‘Unknown’.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Answer <a class="reference internal" href="done.html#mbstyle-line-a1"><span class="std std-ref">provided</span></a> at the end of the workbook.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="challenge-one-rule-classification">
<span id="mbstyle-line-q2"></span><h3><span class="section-number">5.2.6.2. </span>Challenge One Rule Classification<a class="headerlink" href="#challenge-one-rule-classification" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>You can save a lot of typing by doing your classification in an expression using arithmetic or the <kbd class="kbd docutils literal notranslate">Recode</kbd> function</p></li>
<li><p><strong>Challenge:</strong> Create a new style and classify the roads based on their scale rank using expressions in a single rule instead of multiple rules with filters.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Answer <a class="reference internal" href="done.html#mbstyle-line-a2"><span class="std std-ref">provided</span></a> at the end of the workbook.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="challenge-label-shields">
<span id="mbstyle-line-q3"></span><h3><span class="section-number">5.2.6.3. </span>Challenge Label Shields<a class="headerlink" href="#challenge-label-shields" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>The traditional presentation of roads in the US is the use of a shield symbol, with the road number marked on top.</p></li>
<li><p><em>Challenge:</em> Have a look at the documentation for putting a graphic on a text symbolizer in SLD and reproduce this technique in MBStyle.</p>
<img alt="../../../_images/line_shield1.png" src="../../../_images/line_shield1.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Answer <a class="reference internal" href="done.html#mbstyle-line-a3"><span class="std std-ref">provided</span></a> at the end of the workbook.</p>
</div>
</li>
</ol>
</div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="mbstyle.html" title="previous chapter"><span class="section-number">5.1. </span>MBStyle Quickstart</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="polygon.html" title="next chapter"><span class="section-number">5.3. </span>Polygons</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">5.2. Lines</a><ul>
<li><a class="reference internal" href="#line">5.2.1. Line</a></li>
<li><a class="reference internal" href="#multiple-layers">5.2.2. Multiple Layers</a></li>
<li><a class="reference internal" href="#label">5.2.3. Label</a></li>
<li><a class="reference internal" href="#how-labeling-works">5.2.4. How Labeling Works</a></li>
<li><a class="reference internal" href="#zoom">5.2.5. Zoom</a></li>
<li><a class="reference internal" href="#bonus">5.2.6. Bonus</a><ul>
<li><a class="reference internal" href="#challenge-classification">5.2.6.1. Challenge Classification</a></li>
<li><a class="reference internal" href="#challenge-one-rule-classification">5.2.6.2. Challenge One Rule Classification</a></li>
<li><a class="reference internal" href="#challenge-label-shields">5.2.6.3. Challenge Label Shields</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="mbstyle.html" title="previous chapter"><span class="section-number">5.1. </span>MBStyle Quickstart</a></li>
            <li>Next: <a href="polygon.html" title="next chapter"><span class="section-number">5.3. </span>Polygons</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/styling/workshop/mbstyle/linestring.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>