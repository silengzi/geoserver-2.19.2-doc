<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Data Stores &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../static/jquery.js"></script>
  <script type="text/javascript" src="../../static/doctools.js"></script>
  <script type="text/javascript" src="../../static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../index.html" />
      <link rel="up" title="Application schemas" href="index.html" />
      <link rel="next" title="Feature Chaining" href="feature-chaining.html" />
      <link rel="prev" title="Property Interpolation" href="property-interpolation.html" />
</head>
<body class="data/app-schema/data-stores">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Data management</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Application schemas</a> &raquo;</li>
  <li>Data Stores</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="feature-chaining.html" title="Feature Chaining"
       accesskey="N">next</a>|</li>
  <li>
    <a href="property-interpolation.html" title="Property Interpolation"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="data-stores">
<span id="app-schema-data-stores"></span><h1>Data Stores<a class="headerlink" href="#data-stores" title="Permalink to this headline">¶</a></h1>
<p>The app-schema <a class="reference internal" href="mapping-file.html#app-schema-mapping-file"><span class="std std-ref">Mapping File</span></a> requires you to specify your data sources in the <code class="docutils literal notranslate"><span class="pre">sourceDataStores</span></code> section. For GeoServer simple features, these are configured using the web interface, but because app-schema lacks a web configuration interface, data stores must be configured by editing the mapping file.</p>
<p>Many configuration options may be externalised through the use of <a class="reference internal" href="property-interpolation.html#app-schema-property-interpolation"><span class="std std-ref">Property Interpolation</span></a>.</p>
<div class="section" id="the-datastore-element">
<h2>The DataStore element<a class="headerlink" href="#the-datastore-element" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">DataStore</span></code> configuration consists of</p>
<ul class="simple">
<li><p>an <code class="docutils literal notranslate"><span class="pre">id</span></code>, which is an opaque identifier used to refer to the data store elsewhere in a mapping file, and</p></li>
<li><p>one or more <code class="docutils literal notranslate"><span class="pre">Parameter</span></code> elements, which each contain the <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code> of one parameter, and are used to configure the data store.</p></li>
</ul>
<p>An outline of the <code class="docutils literal notranslate"><span class="pre">DataStore</span></code> element:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">DataStore</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="n">datastore</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">&gt;</span>
     <span class="o">&lt;</span><span class="n">parameters</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
             <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;...&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
             <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;...&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
         <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
         <span class="o">...</span>
     <span class="o">&lt;/</span><span class="n">parameters</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">DataStore</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Parameter order is not significant.</p>
</div>
<div class="section" id="database-options">
<h2>Database options<a class="headerlink" href="#database-options" title="Permalink to this headline">¶</a></h2>
<p>Databases such as PostGIS, Oracle, and ArcSDE share some common or similar configuration options.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 34%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></th>
<th class="head"><p>Meaning</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">value</span></code> examples</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dbtype</span></code></p></td>
<td><p>Database type</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">postgisng</span></code>, <code class="docutils literal notranslate"><span class="pre">Oracle</span></code>, <code class="docutils literal notranslate"><span class="pre">arcsde</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">host</span></code></p></td>
<td><p>Host name or IP address of database server</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">database.example.org</span></code>, <code class="docutils literal notranslate"><span class="pre">192.168.3.12</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">port</span></code></p></td>
<td><p>TCP port on database server</p></td>
<td><p>Default if omitted: <code class="docutils literal notranslate"><span class="pre">1521</span></code> (Oracle), <code class="docutils literal notranslate"><span class="pre">5432</span></code> (PostGIS), <code class="docutils literal notranslate"><span class="pre">5151</span></code> (ArcSDE)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">database</span></code></p></td>
<td><p>PostGIS/Oracle database</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">instance</span></code></p></td>
<td><p>ArcSDE instance</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">schema</span></code></p></td>
<td><p>The database schema</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">user</span></code></p></td>
<td><p>The user name used to login to the database server</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">passwd</span></code></p></td>
<td><p>The password used to login to the database server</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Expose</span> <span class="pre">primary</span> <span class="pre">keys</span></code></p></td>
<td><p>Columns with primary keys available for mapping</p></td>
<td><p>Default is <code class="docutils literal notranslate"><span class="pre">false</span></code>, set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to use primary key columns in mapping</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="postgis">
<h2>PostGIS<a class="headerlink" href="#postgis" title="Permalink to this headline">¶</a></h2>
<p>Set the parameter <code class="docutils literal notranslate"><span class="pre">dbtype</span></code> to <code class="docutils literal notranslate"><span class="pre">postgisng</span></code> to use the PostGIS NG (New Generation) driver bundled with GeoServer 2.0 and later.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">DataStore</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="n">datastore</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">parameters</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">dbtype</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">postgisng</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">host</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">postgresql</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">port</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mi">5432</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">database</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">user</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">passwd</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">parameters</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">DataStore</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PostGIS  support is included in the main GeoServer bundle, so a separate plugin is not required.</p>
</div>
</div>
<div class="section" id="oracle">
<h2>Oracle<a class="headerlink" href="#oracle" title="Permalink to this headline">¶</a></h2>
<p>Set the parameter <code class="docutils literal notranslate"><span class="pre">dbtype</span></code> to <code class="docutils literal notranslate"><span class="pre">Oracle</span></code> to use the Oracle Spatial NG (New Generation) driver compatible with GeoServer 2.0 and later.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">DataStore</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="n">datastore</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">parameters</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">dbtype</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">Oracle</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">host</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">oracle</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">port</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mi">1521</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">database</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">demodb</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">user</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">orauser</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">passwd</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">s3cr3t</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">parameters</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">DataStore</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must install the Oracle plugin to connect to Oracle Spatial databases.</p>
</div>
</div>
<div class="section" id="arcsde">
<h2>ArcSDE<a class="headerlink" href="#arcsde" title="Permalink to this headline">¶</a></h2>
<p>This example connects to an ArcSDE database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">DataStore</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="n">datastore</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">parameters</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">dbtype</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">arcsde</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">server</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">arcsde</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">port</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mi">5151</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">instance</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">sde</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">user</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">demo</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">password</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">s3cr3t</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">datastore</span><span class="o">.</span><span class="n">allowNonSpatialTables</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">true</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">parameters</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">DataStore</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The use of non-spatial tables aids delivery of application schemas that use non-spatial properties.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must install the ArcSDE plugin to connect to ArcSDE databases.</p>
</div>
</div>
<div class="section" id="shapefile">
<h2>Shapefile<a class="headerlink" href="#shapefile" title="Permalink to this headline">¶</a></h2>
<p>Shapefile data sources are identified by the presence of a parameter <code class="docutils literal notranslate"><span class="pre">url</span></code>, whose value should be the file URL for the .shp file.</p>
<p>In this example, only the <code class="docutils literal notranslate"><span class="pre">url</span></code> parameter is required. The others are optional:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">DataStore</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="n">shapefile</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">parameters</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">url</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">file</span><span class="p">:</span><span class="o">/</span><span class="n">D</span><span class="p">:</span><span class="o">/</span><span class="n">Workspace</span><span class="o">/</span><span class="n">shapefiles</span><span class="o">/</span><span class="n">VerdeRiverBuffer</span><span class="o">.</span><span class="n">shp</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">memory</span> <span class="n">mapped</span> <span class="n">buffer</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">false</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">create</span> <span class="n">spatial</span> <span class="n">index</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">true</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">charset</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">ISO</span><span class="o">-</span><span class="mi">8859</span><span class="o">-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">parameters</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">DataStore</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">url</span></code> in this case is an example of a Windows filesystem path translated to URL notation.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Shapefile support is included in the main GeoServer bundle, so a separate plugin is not required.</p>
</div>
</div>
<div class="section" id="property-file">
<h2>Property file<a class="headerlink" href="#property-file" title="Permalink to this headline">¶</a></h2>
<p>Property files are configured by specifying a <code class="docutils literal notranslate"><span class="pre">directory</span></code> that is a <code class="docutils literal notranslate"><span class="pre">file:</span></code> URI.</p>
<ul class="simple">
<li><p>If the directory starts with <code class="docutils literal notranslate"><span class="pre">file:./</span></code> it is relative to the mapping file directory. (This is an invalid URI, but it works.)</p></li>
</ul>
<p>For example, the following data store is used to access property files in the same directory as the mapping file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">DataStore</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="n">propertyfile</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">parameters</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">directory</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">file</span><span class="p">:</span><span class="o">./&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">parameters</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">DataStore</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>A property file data store contains <em>all</em> the feature types stored in .properties files in the directory. For example, if the directory contained River.properties and station.properties, the data store would be able to serve them as the feature types <code class="docutils literal notranslate"><span class="pre">River</span></code> and <code class="docutils literal notranslate"><span class="pre">station</span></code>. Other file extensions are ignored.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Property file support is included in the main GeoServer bundle, so a separate plugin is not required.</p>
</div>
</div>
<div class="section" id="jndi">
<h2>JNDI<a class="headerlink" href="#jndi" title="Permalink to this headline">¶</a></h2>
<p>Defining a JDBC data store with a <code class="docutils literal notranslate"><span class="pre">jndiReferenceName</span></code> allows you to use a connection pool provided by your servlet container. This allows detailed configuration of connection pool parameters and sharing of connections between data sources, and even between servlets.</p>
<p>To use a JNDI connection provider:</p>
<ol class="arabic simple">
<li><p>Specify a <code class="docutils literal notranslate"><span class="pre">dbtype</span></code> parameter to to indicate the database type. These values are the same as for the non-JNDI examples above.</p></li>
<li><p>Give the <code class="docutils literal notranslate"><span class="pre">jndiReferenceName</span></code> you set in your servlet container. Both the abbreviated form <code class="docutils literal notranslate"><span class="pre">jdbc/oracle</span></code> form, as in Tomcat, and the canonical form <code class="docutils literal notranslate"><span class="pre">java:comp/env/jdbc/oracle</span></code> are supported.</p></li>
</ol>
<p>This example uses JNDI to obtain Oracle connections:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">DataStore</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">id</span><span class="o">&gt;</span><span class="n">datastore</span><span class="o">&lt;/</span><span class="nb">id</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">parameters</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">dbtype</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">Oracle</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">jndiReferenceName</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">jdbc</span><span class="o">/</span><span class="n">oracle</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">parameters</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">DataStore</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Your servlet container my require you to add a <code class="docutils literal notranslate"><span class="pre">resource-ref</span></code> section at the end of  your <code class="docutils literal notranslate"><span class="pre">geoserver/WEB-INF/web.xml</span></code>. (Tomcat requires this, Jetty does not.) For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">resource</span><span class="o">-</span><span class="n">ref</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">Oracle</span> <span class="n">Spatial</span> <span class="n">Datasource</span><span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">res</span><span class="o">-</span><span class="n">ref</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="n">jdbc</span><span class="o">/</span><span class="n">oracle</span><span class="o">&lt;/</span><span class="n">res</span><span class="o">-</span><span class="n">ref</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">res</span><span class="o">-</span><span class="nb">type</span><span class="o">&gt;</span><span class="n">javax</span><span class="o">.</span><span class="n">sql</span><span class="o">.</span><span class="n">DataSource</span><span class="o">&lt;/</span><span class="n">res</span><span class="o">-</span><span class="nb">type</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">res</span><span class="o">-</span><span class="n">auth</span><span class="o">&gt;</span><span class="n">Container</span><span class="o">&lt;/</span><span class="n">res</span><span class="o">-</span><span class="n">auth</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">resource</span><span class="o">-</span><span class="n">ref</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Here is an example of a Tomcat 6 context in <code class="docutils literal notranslate"><span class="pre">/etc/tomcat6/server.xml</span></code> that includes an Oracle connection pool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Context</span>
    <span class="n">path</span><span class="o">=</span><span class="s2">&quot;/geoserver&quot;</span>
    <span class="n">docBase</span><span class="o">=</span><span class="s2">&quot;/usr/local/geoserver&quot;</span>
    <span class="n">crossContext</span><span class="o">=</span><span class="s2">&quot;false&quot;</span>
    <span class="n">reloadable</span><span class="o">=</span><span class="s2">&quot;false&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">Resource</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;jdbc/oracle&quot;</span>
        <span class="n">auth</span><span class="o">=</span><span class="s2">&quot;Container&quot;</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;javax.sql.DataSource&quot;</span>
        <span class="n">url</span><span class="o">=</span><span class="s2">&quot;jdbc:oracle:thin:@YOUR_DATABASE_HOSTNAME:1521:YOUR_DATABASE_NAME&quot;</span>
        <span class="n">driverClassName</span><span class="o">=</span><span class="s2">&quot;oracle.jdbc.driver.OracleDriver&quot;</span>
        <span class="n">username</span><span class="o">=</span><span class="s2">&quot;YOUR_DATABASE_USERNAME&quot;</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;YOUR_DATABASE_PASSWORD&quot;</span>
        <span class="n">maxActive</span><span class="o">=</span><span class="s2">&quot;20&quot;</span>
        <span class="n">maxIdle</span><span class="o">=</span><span class="s2">&quot;10&quot;</span>
        <span class="n">minIdle</span><span class="o">=</span><span class="s2">&quot;0&quot;</span>
        <span class="n">maxWait</span><span class="o">=</span><span class="s2">&quot;10000&quot;</span>
        <span class="n">minEvictableIdleTimeMillis</span><span class="o">=</span><span class="s2">&quot;300000&quot;</span>
        <span class="n">timeBetweenEvictionRunsMillis</span><span class="o">=</span><span class="s2">&quot;300000&quot;</span>
        <span class="n">numTestsPerEvictionRun</span><span class="o">=</span><span class="s2">&quot;20&quot;</span>
        <span class="n">poolPreparedStatements</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
        <span class="n">maxOpenPreparedStatements</span><span class="o">=</span><span class="s2">&quot;100&quot;</span>
        <span class="n">testOnBorrow</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
        <span class="n">validationQuery</span><span class="o">=</span><span class="s2">&quot;SELECT SYSDATE FROM DUAL&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">Context</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Firewall timeouts can silently sever idle connections to the database and cause GeoServer to hang. If there is a firewall between GeoServer and the database, a connection pool configured to shut down idle connections before the firewall can drop them will prevent GeoServer from hanging. This JNDI connection pool is configured to shut down idle connections after 5 to 10 minutes.</p>
<p>See also <a class="reference internal" href="../../tutorials/tomcat-jndi/tomcat-jndi.html#tomcat-jndi"><span class="std std-ref">Setting up a JNDI connection pool with Tomcat</span></a>.</p>
</div>
<div class="section" id="expose-primary-keys">
<h2>Expose primary keys<a class="headerlink" href="#expose-primary-keys" title="Permalink to this headline">¶</a></h2>
<p>By default, GeoServer conceals the existence of database columns with a primary key. To make such columns available for use in app-schema mapping files, set the data store parameter <code class="docutils literal notranslate"><span class="pre">Expose</span> <span class="pre">primary</span> <span class="pre">keys</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">Expose</span> <span class="n">primary</span> <span class="n">keys</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">true</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">Parameter</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This is known to work with PostGIS, Oracle, and JNDI data stores.</p>
</div>
<div class="section" id="mongodb">
<h2>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h2>
<p>The data store configuration for a MongoDB data base will look like this:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;sourceDataStores&gt;</span>
    <span class="nt">&lt;DataStore&gt;</span>
        <span class="nt">&lt;id&gt;</span>data_source<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;parameters&gt;</span>
            <span class="nt">&lt;Parameter&gt;</span>
                <span class="nt">&lt;name&gt;</span>data_store<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;value&gt;</span>MONGO_DB_URL<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/Parameter&gt;</span>
            <span class="nt">&lt;Parameter&gt;</span>
                <span class="nt">&lt;name&gt;</span>namespace<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;value&gt;</span>NAME_SPACE<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/Parameter&gt;</span>
            <span class="nt">&lt;Parameter&gt;</span>
                <span class="nt">&lt;name&gt;</span>schema_store<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;value&gt;</span>SCHEMA_STORE<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/Parameter&gt;</span>
            <span class="nt">&lt;Parameter&gt;</span>
                <span class="nt">&lt;name&gt;</span>data_store_type<span class="nt">&lt;/name&gt;</span>
                <span class="nt">&lt;value&gt;</span>complex<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/Parameter&gt;</span>
        <span class="nt">&lt;/parameters&gt;</span>
    <span class="nt">&lt;/DataStore&gt;</span>
<span class="nt">&lt;/sourceDataStores&gt;</span>
</pre></div>
</div>
<p>Check <a class="reference internal" href="mongo-tutorial.html#mongo-tutorial"><span class="std std-ref">MongoDB Tutorial</span></a> for a more detailed description about how to use MongoDB with app-schema.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must install the MongoDB plugin to connect to MongoDB databases.</p>
</div>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="property-interpolation.html" title="previous chapter">Property Interpolation</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="feature-chaining.html" title="next chapter">Feature Chaining</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Data Stores</a><ul>
<li><a class="reference internal" href="#the-datastore-element">The DataStore element</a></li>
<li><a class="reference internal" href="#database-options">Database options</a></li>
<li><a class="reference internal" href="#postgis">PostGIS</a></li>
<li><a class="reference internal" href="#oracle">Oracle</a></li>
<li><a class="reference internal" href="#arcsde">ArcSDE</a></li>
<li><a class="reference internal" href="#shapefile">Shapefile</a></li>
<li><a class="reference internal" href="#property-file">Property file</a></li>
<li><a class="reference internal" href="#jndi">JNDI</a></li>
<li><a class="reference internal" href="#expose-primary-keys">Expose primary keys</a></li>
<li><a class="reference internal" href="#mongodb">MongoDB</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="property-interpolation.html" title="previous chapter">Property Interpolation</a></li>
            <li>Next: <a href="feature-chaining.html" title="next chapter">Feature Chaining</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/data/app-schema/data-stores.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>