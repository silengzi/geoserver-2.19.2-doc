<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>External Web Map Server &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../_static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../index.html" />
      <link rel="up" title="Cascaded service data" href="index.html" />
      <link rel="next" title="External Web Map Tile Server" href="wmts.html" />
      <link rel="prev" title="Cascaded Web Feature Service Stored Queries" href="stored_query.html" />
</head>
<body class="data/cascaded/wms">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Data management</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Cascaded service data</a> &raquo;</li>
  <li>External Web Map Server</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="wmts.html" title="External Web Map Tile Server"
       accesskey="N">next</a>|</li>
  <li>
    <a href="stored_query.html" title="Cascaded Web Feature Service Stored Queries"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="external-web-map-server">
<span id="data-external-wms"></span><h1>External Web Map Server<a class="headerlink" href="#external-web-map-server" title="Permalink to this headline">¶</a></h1>
<p>GeoServer has the ability to proxy a remote Web Map Service (WMS).  Supported WMS versions are 1.1.1 and 1.3.0.  This process is sometimes known as <strong>Cascading WMS</strong>.  Loading a remote WMS is useful for many reasons.  If you don’t manage or have access to the remote WMS, you can now manage its output as if it were local.  Even if the remote WMS is not GeoServer, you can use GeoServer features to treat its output (watermarking, decoration, printing, etc).</p>
<p>To access a remote WMS, it is necessary to load it as a store in GeoServer.  GeoServer must be able to access the capabilities document of the remote WMS for the store to be successfully loaded.</p>
<div class="section" id="adding-an-external-wms">
<h2>Adding an external WMS<a class="headerlink" href="#adding-an-external-wms" title="Permalink to this headline">¶</a></h2>
<p>To connect to an external WMS, it is necessary to load it as a new store.  To start, in the <a class="reference internal" href="../../webadmin/index.html#web-admin"><span class="std std-ref">Web administration interface</span></a>, navigate to <span class="menuselection">Stores ‣ Add a new store ‣ WMS</span>.  The option is listed under <span class="guilabel">Other Data Sources</span>.</p>
<div class="figure align-center" id="id1">
<img alt="../../_images/wmsaddnew.png" src="../../_images/wmsaddnew.png" />
<p class="caption"><span class="caption-text"><em>Adding an external WMS as a store</em></span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id2">
<img alt="../../_images/wmsconfigure.png" src="../../_images/wmsconfigure.png" />
<p class="caption"><span class="caption-text"><em>Configuring a new external WMS store</em></span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Option</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p><span class="guilabel">Workspace</span></p></td>
<td><p>Name of the workspace to contain the store.  This will also be the prefix of all of the layer names published from the store.  <strong>The workspace name on the remote WMS is not cascaded.</strong></p></td>
</tr>
<tr class="row-odd"><td><p><span class="guilabel">Data Source Name</span></p></td>
<td><p>Name of the store as known to GeoServer.</p></td>
</tr>
<tr class="row-even"><td><p><span class="guilabel">Description</span></p></td>
<td><p>Description of the store.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="guilabel">Enabled</span></p></td>
<td><p>Enables the store.  If disabled, no data from the remote WMS will be served.</p></td>
</tr>
<tr class="row-even"><td><p><span class="guilabel">Capabilities URL</span></p></td>
<td><p>The URL to access the capabilities document of the remote WMS. If URL contains just server address “<a class="reference external" href="https://host.org/wms">https://host.org/wms</a>” the required WMS GetCapabilities query parameters will be added automatically. Alternatively URL can be a full URL to access the capabilities document “<a class="reference external" href="https://host.org/wms?service=WMS&amp;version=1.1.1&amp;request=GetCapabilities">https://host.org/wms?service=WMS&amp;version=1.1.1&amp;request=GetCapabilities</a>”.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="guilabel">User Name</span></p></td>
<td><p>If the WMS requires authentication, the user name to connect as.</p></td>
</tr>
<tr class="row-even"><td><p><span class="guilabel">Password</span></p></td>
<td><p>If the WMS requires authentication, the password to connect with.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="guilabel">Max concurrent connections</span></p></td>
<td><p>The maximum number of persistent connections to keep for this WMS.</p></td>
</tr>
</tbody>
</table>
<p>When finished, click <span class="guilabel">Save</span>.</p>
</div>
<div class="section" id="configuring-external-wms-layers">
<h2>Configuring external WMS layers<a class="headerlink" href="#configuring-external-wms-layers" title="Permalink to this headline">¶</a></h2>
<p>When properly loaded, all layers served by the external WMS will be available to GeoServer.  Before they can be served, however, they will need to be individually configured (published) as new layers.  See the section on <a class="reference internal" href="../webadmin/layers.html#data-webadmin-layers"><span class="std std-ref">Layers</span></a> for how to add and edit new layers.  Once published, these layers will show up in the <a class="reference internal" href="../webadmin/layerpreview.html#layerpreview"><span class="std std-ref">Layer Preview</span></a> and as part of the WMS capabilities document.</p>
</div>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>Connecting a remote WMS allows for the following features:</p>
<ul class="simple">
<li><p><strong>Dynamic reprojection</strong>.  While the default projection for a layer is cascaded, it is possible to pass the SRS parameter through to the remote WMS.  Should that SRS not be valid on the remote server, GeoServer will dynamically reproject the images sent to it from the remote WMS.</p></li>
<li><p><strong>GetFeatureInfo</strong>.  WMS GetFeatureInfo requests will be passed to the remote WMS.  If the remote WMS supports the <code class="docutils literal notranslate"><span class="pre">application/vnd.ogc.gml</span></code> format the request will be successful.</p></li>
<li><p>Full <strong>REST Configuration</strong>. See the <a class="reference internal" href="../../rest/index.html#rest"><span class="std std-ref">REST</span></a> section for more information about the GeoServer REST interface.</p></li>
</ul>
</div>
<div class="section" id="cascaded-wms-settings">
<h2>Cascaded WMS Settings<a class="headerlink" href="#cascaded-wms-settings" title="Permalink to this headline">¶</a></h2>
<p>Making use of Remotely advertised styles and supported image formats.</p>
<ul class="simple">
<li><p><strong>Remote Styles Configuration</strong>. Remote Styles advertised in WMS capability document under &lt;Layer&gt; tag, can also be used. A default style and additionally supported styles can be selected. By default no remote style is selected which indicates Geoserver to use whatever style is configured remotely and all available styles are selected. This means that remote styles can be passed in a GetMap request just like local styles. If the styles on remote WMS server have changed, please re-save the layer from UI.</p></li>
<li><p><strong>Remote Image Format</strong>. Preferred image format(s) can be selected. It is possible to select a preferred image format and additionally supported image formats. This configuration works looks at the requested image format in local GetMap, if the GetMap format is either the preferred remote format or one of the many selected remote formats, the passed image format will be relayed in the remote WMS request. If the image format requested in local GetMap is neither the preferred remote image format nor in the list of Selected formats, the remote WMS format will use the preferred remote image format. This setting only works for image formats and ignore other advertised formats such as JSON, KML and SVG etc</p></li>
<li><p><strong>Scale Denominators</strong>. Min and Max scale denominators can be applied to WMS layers. The effects of this configurations on the WMS layer are similar to that of scale denominators used in SLD as filters. See <a class="reference internal" href="../../styling/sld/reference/rules.html#sld-reference-rules"><span class="std std-ref">Rules</span></a></p></li>
<li><p><strong>Respect Advertised Bounds</strong>. It is possible to ignore remote WMS requests with bounding box completely outside the advertised bounds of remote WMS layer. Some external WMS providers might respond with error instead of empty transparent image for WMS requests outside their advertised bounds, in such cases enable the check box to bar Geoserver from making empty WMS requests to WMS provider.</p></li>
</ul>
<div class="figure align-center">
<img alt="../../_images/cascaded_wms.png" src="../../_images/cascaded_wms.png" />
</div>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>Layers served through an external WMS have some, but not all of the functionality of a local WMS.</p>
<ul class="simple">
<li><p>Layers cannot be styled with SLD.</p></li>
<li><p>Alternate (local) styles cannot be used.</p></li>
<li><p>Extra request parameters (<code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">elevation</span></code>, <code class="docutils literal notranslate"><span class="pre">cql_filter</span></code>, etc.) cannot be used.</p></li>
<li><p>Image format cannot be specified.  GeoServer will attempt to request PNG images, and if that fails will use the remote server’s default image format.</p></li>
</ul>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="stored_query.html" title="previous chapter">Cascaded Web Feature Service Stored Queries</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="wmts.html" title="next chapter">External Web Map Tile Server</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">External Web Map Server</a><ul>
<li><a class="reference internal" href="#adding-an-external-wms">Adding an external WMS</a></li>
<li><a class="reference internal" href="#configuring-external-wms-layers">Configuring external WMS layers</a></li>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#cascaded-wms-settings">Cascaded WMS Settings</a></li>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="stored_query.html" title="previous chapter">Cascaded Web Feature Service Stored Queries</a></li>
            <li>Next: <a href="wmts.html" title="next chapter">External Web Map Tile Server</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/data/cascaded/wms.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>