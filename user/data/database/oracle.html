<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Oracle &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../static/jquery.js"></script>
  <script type="text/javascript" src="../../static/doctools.js"></script>
  <script type="text/javascript" src="../../static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../index.html" />
      <link rel="up" title="Databases" href="index.html" />
      <link rel="next" title="Microsoft SQL Server and SQL Azure" href="sqlserver.html" />
      <link rel="prev" title="MySQL" href="mysql.html" />
</head>
<body class="data/database/oracle">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Data management</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Databases</a> &raquo;</li>
  <li>Oracle</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="sqlserver.html" title="Microsoft SQL Server and SQL Azure"
       accesskey="N">next</a>|</li>
  <li>
    <a href="mysql.html" title="MySQL"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="oracle">
<span id="data-oracle"></span><h1>Oracle<a class="headerlink" href="#oracle" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>GeoServer does not come built-in with support for Oracle; it must be installed through an extension.  Proceed to <a class="reference internal" href="#oracle-install"><span class="std std-ref">Installing the Oracle extension</span></a> for installation details.</p>
</div>
<p><a class="reference external" href="http://www.oracle.com/technology/products/spatial/index.html">Oracle Spatial and Locator</a> are the spatial components of Oracle.
<strong>Locator</strong> is provided with all Oracle versions, but has limited spatial functions.
<strong>Spatial</strong> is Oracle’s full-featured spatial offering, but requires a specific license to use.</p>
<div class="section" id="installing-the-oracle-extension">
<span id="oracle-install"></span><h2>Installing the Oracle extension<a class="headerlink" href="#installing-the-oracle-extension" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Download the Oracle extension from the <a class="reference external" href="http://geoserver.org/download">GeoServer download page</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure to match the version of the extension to the version of the GeoServer instance!</p>
</div>
</li>
<li><p>Extract the contents of the archive into the <code class="docutils literal notranslate"><span class="pre">WEB-INF/lib</span></code> directory of the GeoServer installation.</p></li>
</ol>
</div>
<div class="section" id="adding-an-oracle-datastore">
<h2>Adding an Oracle datastore<a class="headerlink" href="#adding-an-oracle-datastore" title="Permalink to this headline">¶</a></h2>
<p>Once the extension is properly installed <span class="guilabel">Oracle</span> appears as an option in the <span class="guilabel">Vector Data Sources</span> list when creating a new data store.</p>
<div class="figure align-center" id="id1">
<img alt="../../images/oraclecreate.png" src="../../images/oraclecreate.png" />
<p class="caption"><span class="caption-text"><em>Oracle in the list of data sources</em></span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="configuring-an-oracle-datastore">
<h2>Configuring an Oracle datastore<a class="headerlink" href="#configuring-an-oracle-datastore" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center" id="id2">
<img alt="../../images/oracleconfigure.png" src="../../images/oracleconfigure.png" />
<p class="caption"><span class="caption-text"><em>Configuring an Oracle datastore</em></span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Option</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">host</span></code></p></td>
<td><p>The Oracle server host name or IP address.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">port</span></code></p></td>
<td><p>The port on which the Oracle server is accepting connections (often this is port 1521).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">database</span></code></p></td>
<td><p>The name of the database to connect to.
By default this is interpreted as a SID name.  To connect to a Service, prefix the name with a <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">schema</span></code></p></td>
<td><p>The database schema to access tables from. Setting this value greatly increases the speed at which the data store displays its publishable tables and views, so it is advisable to set this.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">user</span></code></p></td>
<td><p>The name of the user to use when connecting to the database.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></td>
<td><p>The password to use when connecting to the database.  Leave blank for no password.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span> <span class="pre">connections</span></code>
<code class="docutils literal notranslate"><span class="pre">min</span> <span class="pre">connections</span></code>
<code class="docutils literal notranslate"><span class="pre">fetch</span> <span class="pre">size</span></code>
<code class="docutils literal notranslate"><span class="pre">Connection</span> <span class="pre">timeout</span></code>
<code class="docutils literal notranslate"><span class="pre">validate</span> <span class="pre">connections</span></code></p></td>
<td><p>Connection pool configuration parameters. See <a class="reference internal" href="connection-pooling.html#connection-pooling"><span class="std std-ref">Database Connection Pooling</span></a> for details.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Loose</span> <span class="pre">bbox</span></code></p></td>
<td><p>Controls how bounding box filters are made against geometries in the database. See the <a class="reference internal" href="#oracle-loose-bbox"><span class="std std-ref">Using loose bounding box</span></a> section below.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Metadata</span> <span class="pre">bbox</span></code></p></td>
<td><p>Flag controlling the use of MDSYS.USER_SDO_GEOM_METADATA or MDSYS.ALL_SDO_GEOM_METADATA table for bounding box calculations, this brings a better performance if the views access is fast and the bounds are configured right in the tables default is false</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="connecting-to-an-oracle-cluster">
<h2>Connecting to an Oracle cluster<a class="headerlink" href="#connecting-to-an-oracle-cluster" title="Permalink to this headline">¶</a></h2>
<p>In order to connect to an Oracle RAC one can use an almost full JDBC url as the <code class="docutils literal notranslate"><span class="pre">database</span></code>, provided it starts with <code class="docutils literal notranslate"><span class="pre">(</span></code> it will be used verbatim and options “host” and “port” will be ignored. Here is an example “database” value used to connect to an Oracle RAC:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">DESCRIPTION</span><span class="o">=</span><span class="p">(</span><span class="n">LOAD_BALANCE</span><span class="o">=</span><span class="n">on</span><span class="p">)(</span><span class="n">ADDRESS</span><span class="o">=</span><span class="p">(</span><span class="n">PROTOCOL</span><span class="o">=</span><span class="n">TCP</span><span class="p">)(</span><span class="n">HOST</span><span class="o">=</span><span class="n">host1</span><span class="p">)</span> <span class="p">(</span><span class="n">PORT</span><span class="o">=</span><span class="mi">1521</span><span class="p">))(</span><span class="n">ADDRESS</span><span class="o">=</span><span class="p">(</span><span class="n">PROTOCOL</span><span class="o">=</span><span class="n">TCP</span><span class="p">)(</span><span class="n">HOST</span><span class="o">=</span><span class="n">host2</span><span class="p">)</span> <span class="p">(</span><span class="n">PORT</span><span class="o">=</span><span class="mi">1521</span><span class="p">))(</span><span class="n">CONNECT_DATA</span><span class="o">=</span><span class="p">(</span><span class="n">SERVICE_NAME</span><span class="o">=</span><span class="n">service</span><span class="p">)))</span>
</pre></div>
</div>
<p>More information about this syntax can be found in the <a class="reference external" href="http://docs.oracle.com/cd/B28359_01/java.111/e10788/rac.htm#CHDCDFAC">Oracle documentation</a>.</p>
<div class="section" id="connecting-to-a-sid-or-a-service">
<h3>Connecting to a SID or a Service<a class="headerlink" href="#connecting-to-a-sid-or-a-service" title="Permalink to this headline">¶</a></h3>
<p>Recent versions of Oracle support connecting to a database via either a SID name or a Service name.
A SID connection descriptor has the form:  <code class="docutils literal notranslate"><span class="pre">host:port:database</span></code>,
while a Service connection descriptor has the format <code class="docutils literal notranslate"><span class="pre">host:port/database</span></code>.
GeoServer uses the SID form by default. To connect via a Service,
prefix the <code class="docutils literal notranslate"><span class="pre">database</span></code> name configuration entry with a <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p>
</div>
<div class="section" id="connecting-to-database-through-ldap">
<h3>Connecting to database through LDAP<a class="headerlink" href="#connecting-to-database-through-ldap" title="Permalink to this headline">¶</a></h3>
<p>For instance if you want to establish a connection with the jdbc thin driver through LDAP, you can use following connect string for the input field <code class="docutils literal notranslate"><span class="pre">database</span></code>
<code class="docutils literal notranslate"><span class="pre">ldap://[host]:[Port]/[db],cn=OracleContext,dc=[oracle_ldap_context]</span></code>.</p>
<p>If you are using referrals, enable it by placing a jndi.properties file in geoserver’s CLASSPATH, which is in geoserver/WEB-INF/classes.
This property file contains:</p>
<blockquote>
<div><p>java.naming.referral=follow</p>
</div></blockquote>
</div>
<div class="section" id="using-loose-bounding-box">
<span id="oracle-loose-bbox"></span><h3>Using loose bounding box<a class="headerlink" href="#using-loose-bounding-box" title="Permalink to this headline">¶</a></h3>
<p>When the <code class="docutils literal notranslate"><span class="pre">Loose</span> <span class="pre">bbox</span></code> option is set, only the bounding box of database geometries is used in spatial queries.  This results in a significant performance gain. The downside is that some geometries may be reported as intersecting a BBOX when they actually do not.</p>
<p>If the primary use of the database is through the <a class="reference internal" href="../../services/wms/index.html#wms"><span class="std std-ref">Web Map Service (WMS)</span></a> this flag can be set safely, since querying more geometries does not have any visible effect. However, if using the <a class="reference internal" href="../../services/wfs/index.html#wfs"><span class="std std-ref">Web Feature Service (WFS)</span></a> and making use of BBOX filtering capabilities, this flag should not be set.</p>
</div>
<div class="section" id="using-the-geometry-metadata-table">
<h3>Using the geometry metadata table<a class="headerlink" href="#using-the-geometry-metadata-table" title="Permalink to this headline">¶</a></h3>
<p>The Oracle data store by default looks at the <code class="docutils literal notranslate"><span class="pre">MDSYS.USER_SDO*</span></code> and <code class="docutils literal notranslate"><span class="pre">MDSYS.ALL_SDO*</span></code> views
to determine the geometry type and native SRID of each geometry column.
Those views are automatically populated with information about the geometry columns stored in tables that the current
user owns (for the <code class="docutils literal notranslate"><span class="pre">MDSYS.USER_SDO*</span></code> views) or can otherwise access (for the <code class="docutils literal notranslate"><span class="pre">MDSYS.ALL_SDO*</span></code> views).</p>
<p>There are a few issues with this strategy:</p>
<blockquote>
<div><ul class="simple">
<li><p>if the connection pool user cannot access the tables (because <a class="reference internal" href="sqlsession.html#data-sqlsession"><span class="std std-ref">impersonation</span></a> is used)
the MDSYS views will be empty, making it impossible to determine both the geometry type and the native SRID</p></li>
<li><p>the geometry type can be specified only while building the spatial indexes, as an index constraint.  However
such information is often not included when creating the indexes</p></li>
<li><p>the views are populated dynamically based on the current user. If the database has thousands of tables and users
the views can become very slow</p></li>
</ul>
</div></blockquote>
<p>Starting with GeoServer 2.1.4 the administrator can address the above issues by manually creating a geometry metadata table
describing each geometry column.
Its presence is indicated via the Oracle datastore connection parameter named <em>Geometry metadata table</em>
(which may be a simple table name or a schema-qualified one).
The table has the following structure (the table name is flexible, just specify the one chosen in the data store connection parameter):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">GEOMETRY_COLUMNS</span><span class="p">(</span>
   <span class="n">F_TABLE_SCHEMA</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
   <span class="n">F_TABLE_NAME</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
   <span class="n">F_GEOMETRY_COLUMN</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
   <span class="n">COORD_DIMENSION</span> <span class="n">INTEGER</span><span class="p">,</span>
   <span class="n">SRID</span> <span class="n">INTEGER</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
   <span class="n">TYPE</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
   <span class="n">UNIQUE</span><span class="p">(</span><span class="n">F_TABLE_SCHEMA</span><span class="p">,</span> <span class="n">F_TABLE_NAME</span><span class="p">,</span> <span class="n">F_GEOMETRY_COLUMN</span><span class="p">),</span>
   <span class="n">CHECK</span><span class="p">(</span><span class="n">TYPE</span> <span class="n">IN</span> <span class="p">(</span><span class="s1">&#39;POINT&#39;</span><span class="p">,</span><span class="s1">&#39;LINE&#39;</span><span class="p">,</span> <span class="s1">&#39;POLYGON&#39;</span><span class="p">,</span> <span class="s1">&#39;COLLECTION&#39;</span><span class="p">,</span> <span class="s1">&#39;MULTIPOINT&#39;</span><span class="p">,</span> <span class="s1">&#39;MULTILINE&#39;</span><span class="p">,</span> <span class="s1">&#39;MULTIPOLYGON&#39;</span><span class="p">,</span> <span class="s1">&#39;GEOMETRY&#39;</span><span class="p">)</span> <span class="p">));</span>
</pre></div>
</div>
<p>When the table is present the store first searches it for information about each geometry column
to be classified, and falls back on the MDSYS views only if the table does not contain any information.</p>
</div>
</div>
<div class="section" id="configuring-an-oracle-database-with-jndi">
<h2>Configuring an Oracle database with JNDI<a class="headerlink" href="#configuring-an-oracle-database-with-jndi" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../../tutorials/tomcat-jndi/tomcat-jndi.html#tomcat-jndi"><span class="std std-ref">Setting up a JNDI connection pool with Tomcat</span></a> for a guide on setting up an Oracle connection using JNDI.</p>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="mysql.html" title="previous chapter">MySQL</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="sqlserver.html" title="next chapter">Microsoft SQL Server and SQL Azure</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Oracle</a><ul>
<li><a class="reference internal" href="#installing-the-oracle-extension">Installing the Oracle extension</a></li>
<li><a class="reference internal" href="#adding-an-oracle-datastore">Adding an Oracle datastore</a></li>
<li><a class="reference internal" href="#configuring-an-oracle-datastore">Configuring an Oracle datastore</a></li>
<li><a class="reference internal" href="#connecting-to-an-oracle-cluster">Connecting to an Oracle cluster</a><ul>
<li><a class="reference internal" href="#connecting-to-a-sid-or-a-service">Connecting to a SID or a Service</a></li>
<li><a class="reference internal" href="#connecting-to-database-through-ldap">Connecting to database through LDAP</a></li>
<li><a class="reference internal" href="#using-loose-bounding-box">Using loose bounding box</a></li>
<li><a class="reference internal" href="#using-the-geometry-metadata-table">Using the geometry metadata table</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-an-oracle-database-with-jndi">Configuring an Oracle database with JNDI</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="mysql.html" title="previous chapter">MySQL</a></li>
            <li>Next: <a href="sqlserver.html" title="next chapter">Microsoft SQL Server and SQL Azure</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/data/database/oracle.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>