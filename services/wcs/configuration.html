<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>WCS configuration &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/searchtools.js"></script>
  <script type="text/javascript" src="../../searchindex.js"></script>
  <link rel="shortcut icon" href="../../_static/geoserver.ico"/>
      <link rel="search" title="Search" href="../../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../../index.html" />
      <link rel="up" title="Web Coverage Service (WCS)" href="index.html" />
      <link rel="next" title="WCS Request Builder" href="requestbuilder.html" />
      <link rel="prev" title="WCS Vendor Parameters" href="vendor.html" />
</head>
<body class="services/wcs/configuration">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="../index.html" accesskey="U">Services</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Web Coverage Service (WCS)</a> &raquo;</li>
  <li>WCS configuration</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="requestbuilder.html" title="WCS Request Builder"
       accesskey="N">next</a>|</li>
  <li>
    <a href="vendor.html" title="WCS Vendor Parameters"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="wcs-configuration">
<span id="id1"></span><h1>WCS configuration<a class="headerlink" href="#wcs-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="coverage-processing">
<h2>Coverage processing<a class="headerlink" href="#coverage-processing" title="Permalink to this headline">¶</a></h2>
<p>The WCS processing chain can be tuned in respect of how raster overviews and read subsampling are used.</p>
<p>The overview policy has four possible values:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 80%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Option</strong></p></td>
<td><p><strong>Description</strong></p></td>
<td><p><strong>Version</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>Lower resolution overview</strong></p></td>
<td><p>Looks up the two overviews with a resolution closest to the one requested and chooses the one at the lower resolution.</p></td>
<td><p>2.0.3</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Don’t use overviews</strong></p></td>
<td><p>Overviews will be ignored, the data at its native resolution will be used instead. This is the default value.</p></td>
<td><p>2.0.3</p></td>
</tr>
<tr class="row-even"><td><p><strong>Higher resolution overview</strong></p></td>
<td><p>Looks up the two overviews with a resolution closest to the one requested and chooses the one at the higher resolution.</p></td>
<td><p>2.0.3</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Closest overview</strong></p></td>
<td><p>Looks up the overview closest to the one requested</p></td>
<td><p>2.0.3</p></td>
</tr>
</tbody>
</table>
<p>While reading coverage data at a resolution lower than the one available on persistent storage its common to use subsampling, that is, read one every N pixels as a way to reduce the resolution of the data read in memory. <strong>Use subsampling</strong> controls wheter subsampling is enabled or not.</p>
</div>
<div class="section" id="request-limits">
<h2>Request limits<a class="headerlink" href="#request-limits" title="Permalink to this headline">¶</a></h2>
<p>The request limit options allow the administrator to limit the resources consumed by each WCS <code class="docutils literal notranslate"><span class="pre">GetCoverage</span></code> request.</p>
<p>The request limits limit the size of the image read from the source and the size of the image returned to the client. Both of these limits are to be considered a worst case scenario and are setup to make sure the server never gets asked to deal with too much data.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 80%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Option</strong></p></td>
<td><p><strong>Description</strong></p></td>
<td><p><strong>Version</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>Maximum input memory</strong></p></td>
<td><p>Sets the maximum amount of memory, in kilobytes, a GetCovearge request might use, at most, to read a coverage from the data source. The memory is computed as <code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">*</span> <span class="pre">rh</span> <span class="pre">*</span> <span class="pre">pixelsize</span></code>, where <code class="docutils literal notranslate"><span class="pre">rw</span></code> and <code class="docutils literal notranslate"><span class="pre">rh</span></code> are the size of the raster to be read and <code class="docutils literal notranslate"><span class="pre">pixelsize</span></code> is the dimension or a pixel (e.g., a RGBA image will have 32bit pixels, a batimetry might have 16bit signed int ones)</p></td>
<td><p>2.0.3</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Maximum output memory</strong></p></td>
<td><p>Sets the maximum amount of memory, in kilobytes, a GetCoverage request might use, at most, to host the resulting raster. The memory is computed as <code class="docutils literal notranslate"><span class="pre">ow</span> <span class="pre">*</span> <span class="pre">oh</span> <span class="pre">*</span> <span class="pre">pixelsize</span></code>, where <code class="docutils literal notranslate"><span class="pre">ow</span></code> and <code class="docutils literal notranslate"><span class="pre">oh</span></code> are the size of the raster to be generated in output.</p></td>
<td><p>2.0.3</p></td>
</tr>
<tr class="row-even"><td><p><strong>Max number of dimension values</strong></p></td>
<td><p>Sets the maximum number of dimension (time, at least for now) values that a client can request in a GetCoverage request (the work to be done is usually proportional to said number of times, and the list of values is kept in memory during the processing)</p></td>
<td><p>2.14.0</p></td>
</tr>
</tbody>
</table>
<p>To understand the limits let’s consider a very simplified examle in which no tiles and overviews enter the game:</p>
<ul class="simple">
<li><p>The request hits a certain area of the original raster. Reading it at full resolution requires grabbing a raster of size <code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">*</span> <span class="pre">rh</span></code>, which has a certain number of bands, each with a certain size. The amount of memory used for the read will be <code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">*</span> <span class="pre">rh</span> <span class="pre">*</span> <span class="pre">pixelsize</span></code>. This is the value measured by the input memory limit</p></li>
<li><p>The WCS performs the necessary processing: band selection, resolution change (downsampling or upsampling), reprojection</p></li>
<li><p>The resuling raster will have size <code class="docutils literal notranslate"><span class="pre">ow</span> <span class="pre">*</span> <span class="pre">oh</span></code> and will have a certain number of bands, possibly less than the input data, each with a certain size. The amount of memory used for the final raster will be <code class="docutils literal notranslate"><span class="pre">ow</span> <span class="pre">*</span> <span class="pre">oh</span> <span class="pre">*</span> <span class="pre">pixelsize</span></code>. This is the value measured by the output memory limit.</p></li>
<li><p>Finally the resulting raster will be encoded in the output format. Depending on the output format structure the size of the result might be higher than the in memory size (ArcGrid case) or smaller (for example in the case of GeoTIFF output, which is normally LZW compressed)</p></li>
</ul>
<p>In fact reality is a bit more complicated:</p>
<ul class="simple">
<li><p>The input source might be tiled, which means there is no need to fully read in memory the region, but it is sufficient to do so one tile at a time. The input limits won’t consider inner tiling when computing the limits, but if all the input coverages are tiled the input limits should be designed considering the amount of data to be read from the persistent storage as opposed to the amount of data to be stored in memory</p></li>
<li><p>The reader might be using overviews or performing subsampling during the read to avoid actually reading all the data at the native resolution should the output be subsampled</p></li>
<li><p>The output format might be tile aware as well (GeoTIFF is), meaning it might be able to write out one tile at a time. In this case not even the output raster will be stored in memory fully at any given time.</p></li>
</ul>
<p>Only a few input formats are so badly structure that they force the reader to read the whole input data in one shot, and should be avoided. Examples are:
* JPEG or PNG images with world file
* Single tiled and JPEG compressed GeoTIFF files</p>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="vendor.html" title="previous chapter">WCS Vendor Parameters</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="requestbuilder.html" title="next chapter">WCS Request Builder</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">WCS configuration</a><ul>
<li><a class="reference internal" href="#coverage-processing">Coverage processing</a></li>
<li><a class="reference internal" href="#request-limits">Request limits</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="vendor.html" title="previous chapter">WCS Vendor Parameters</a></li>
            <li>Next: <a href="requestbuilder.html" title="next chapter">WCS Request Builder</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/services/wcs/configuration.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>