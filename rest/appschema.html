<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <title>Uploading an app-schema mapping file &mdash; GeoServer 2.19.2 User Manual</title>
  <link rel="stylesheet" href="../_static/blueprint/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../_static/blueprint/print.css" type="text/css" media="print" /> 
  <!--[if IE]>
  <link rel="stylesheet" href="../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../_static/default.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.19.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
  <link rel="shortcut icon" href="../_static/geoserver.ico"/>
      <link rel="search" title="Search" href="../search.html" />
      <link rel="top" title="GeoServer 2.19.2 User Manual" href="../index.html" />
      <link rel="up" title="REST" href="index.html" />
      <link rel="next" title="REST configuration API reference" href="api/index.html" />
      <link rel="prev" title="Uploading a new image mosaic" href="imagemosaic.html" />
</head>
<body class="rest/appschema">
  <div id="header" class="selfclear">
    <div class="wrap selfclear">
      <div id="logo"><a href="../index.html">GeoServer 2.19.2 User Manual</a></div>
      <ul id="top-nav">
        <li class="first"><a href="http://geoserver.org/about">About</a></li>
        <li><a href="http://blog.geoserver.org/">Blog</a></li>
        <li><a href="http://geoserver.org/download">Download</a></li>
        <!--<li><a href="../index.html">Documentation</a></li>-->
      </ul>
        <form id="quick-search" action="../search.html" method="get">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
            <input id="quick-search-submit" type="image" value="Search" src="../_static/chrome/search_icon_green.png" />
          </fieldset>
        </form>
    </div><!-- /.wrap -->
  </div><!-- /#header -->
  <div id="main">
    <div class="wrap selfclear">
      <div id="content-left" class="content-border"></div>
      <div id="content">
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoServer 2.19.2 User Manual</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">REST</a> &raquo;</li>
  <li>Uploading an app-schema mapping file</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../py-modindex.html" title="Python Module Index"
       accesskey="">modules</a></li>
  <li>
    <a href="api/index.html" title="REST configuration API reference"
       accesskey="N">next</a>|</li>
  <li>
    <a href="imagemosaic.html" title="Uploading a new image mosaic"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="uploading-an-app-schema-mapping-file">
<span id="rest-app-schema"></span><h1>Uploading an app-schema mapping file<a class="headerlink" href="#uploading-an-app-schema-mapping-file" title="Permalink to this headline">¶</a></h1>
<p><strong>Create a new app-schema store and update the feature type mappings of an existing app-schema store by uploading a mapping configuration file</strong></p>
<div class="admonition note" id="appschema-upload-create">
<p class="admonition-title">Note</p>
<p>The following request uploads an app-schema mapping file called <code class="docutils literal notranslate"><span class="pre">LandCoverVector.xml</span></code> to a data store called <code class="docutils literal notranslate"><span class="pre">LandCoverVector</span></code>. If no <code class="docutils literal notranslate"><span class="pre">LandCoverVector</span></code> data store existed in workspace <code class="docutils literal notranslate"><span class="pre">lcv</span></code> prior to the request, it would be created.</p>
</div>
<p><em>Request</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>curl -v -X PUT -d @LandCoverVector.xml -H &quot;Content-Type: text/xml&quot;
-u admin:geoserver http://localhost:8080/geoserver/rest/workspaces/lcv/datastores/LandCoverVector/file.appschema?configure=all
</pre></div>
</div>
</div>
<p><em>Response</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">201</span> <span class="n">Created</span>
</pre></div>
</div>
</div>
<div class="section" id="listing-app-schema-store-details">
<h1>Listing app-schema store details<a class="headerlink" href="#listing-app-schema-store-details" title="Permalink to this headline">¶</a></h1>
<p><em>Request</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="p">:</span><span class="n">geoserver</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span>
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">workspaces</span><span class="o">/</span><span class="n">lcv</span><span class="o">/</span><span class="n">datastores</span><span class="o">/</span><span class="n">LandCoverVector</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
</div>
<p><em>Response</em></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;dataStore&gt;</span>
  <span class="nt">&lt;name&gt;</span>LandCoverVector<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;type&gt;</span>Application Schema DataAccess<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
  <span class="nt">&lt;workspace&gt;</span>
    <span class="nt">&lt;name&gt;</span>lcv<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;atom:link</span> <span class="na">xmlns:atom=</span><span class="s">&quot;http://www.w3.org/2005/Atom&quot;</span> <span class="na">rel=</span><span class="s">&quot;alternate&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:8080/geoserver/rest/workspaces/lcv.xml&quot;</span> <span class="na">type=</span><span class="s">&quot;application/xml&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/workspace&gt;</span>
  <span class="nt">&lt;connectionParameters&gt;</span>
    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;dbtype&quot;</span><span class="nt">&gt;</span>app-schema<span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;namespace&quot;</span><span class="nt">&gt;</span>http://inspire.ec.europa.eu/schemas/lcv/3.0<span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;url&quot;</span><span class="nt">&gt;</span>file:/path/to/data_dir/data/lcv/LandCoverVector/LandCoverVector.appschema<span class="nt">&lt;/entry&gt;</span>
  <span class="nt">&lt;/connectionParameters&gt;</span>
  <span class="nt">&lt;__default&gt;</span>false<span class="nt">&lt;/__default&gt;</span>
  <span class="nt">&lt;featureTypes&gt;</span>
    <span class="nt">&lt;atom:link</span> <span class="na">xmlns:atom=</span><span class="s">&quot;http://www.w3.org/2005/Atom&quot;</span> <span class="na">rel=</span><span class="s">&quot;alternate&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:8080/geoserver/rest/workspaces/lcv/datastores/LandCoverVector/featuretypes.xml&quot;</span> <span class="na">type=</span><span class="s">&quot;application/xml&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/featureTypes&gt;</span>
<span class="nt">&lt;/dataStore&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="uploading-a-new-app-schema-mapping-configuration-file">
<h1>Uploading a new app-schema mapping configuration file<a class="headerlink" href="#uploading-a-new-app-schema-mapping-configuration-file" title="Permalink to this headline">¶</a></h1>
<p><strong>Upload a new mapping configuration, stored in the mapping file “`LandCoverVector_alternative.xml”, to the “LandCoverVector” data store</strong></p>
<p><em>Request</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>curl -v -X PUT -d @LandCoverVector_alternative.xml -H &quot;Content-Type: text/xml&quot;
  -u admin:geoserver http://localhost:8080/geoserver/rest/workspaces/lcv/datastores/LandCoverVector/file.appschema?configure=none
</pre></div>
</div>
</div>
<p><em>Response</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">200</span> <span class="n">OK</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This time the <code class="docutils literal notranslate"><span class="pre">configure</span></code> parameter is set to <code class="docutils literal notranslate"><span class="pre">none</span></code>, because we don’t want to configure again the feature types, just replace their mapping configuration.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the set of feature types mapped in the new configuration file differs from the set of feature types mapped in the old one (either some are missing, or some are new, or both), the best way to proceed is to delete the data store and create it anew issuing another PUT request, <a class="reference internal" href="#appschema-upload-create"><span class="std std-ref">as shown above</span></a>.</p>
</div>
</div>
<div class="section" id="uploading-multiple-app-schema-mapping-files">
<h1>Uploading multiple app-schema mapping files<a class="headerlink" href="#uploading-multiple-app-schema-mapping-files" title="Permalink to this headline">¶</a></h1>
<p><strong>Create a new app-schema data store based on a complex mapping configuration split into multiple files, and show how to upload application schemas (i.e. XSD files) along with the mapping configuration.</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the previous example, we have seen how to create a new app-schema data store by uploading a mapping configuration stored in a single file; this time, things are more complicated, since the mappings have been spread over two configuration files: the main configuration file is called <code class="docutils literal notranslate"><span class="pre">geosciml.appschema</span></code> and contains the mappings for three feature types: <code class="docutils literal notranslate"><span class="pre">GeologicUnit</span></code>, <code class="docutils literal notranslate"><span class="pre">MappedFeature</span></code> and <code class="docutils literal notranslate"><span class="pre">GeologicEvent</span></code>; the second file is called <code class="docutils literal notranslate"><span class="pre">cgi_termvalue.xml</span></code> and contains the mappings for a single non-feature type, <code class="docutils literal notranslate"><span class="pre">CGI_TermValue</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As explained in the <a class="reference internal" href="api/datastores.html#rest-api-datastores-file-put-appschema"><span class="std std-ref">REST API reference documentation for data stores</span></a>, when the mapping configuration is spread over multiple files, the extension of the main configuration file must be <code class="docutils literal notranslate"><span class="pre">.appschema</span></code>.</p>
</div>
<p>The main configuration file includes the second file:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>...
<span class="nt">&lt;includedTypes&gt;</span>
  <span class="nt">&lt;Include&gt;</span>cgi_termvalue.xml<span class="nt">&lt;/Include&gt;</span>
<span class="nt">&lt;/includedTypes&gt;</span>
...
</pre></div>
</div>
<p>We also want to upload to GeoServer the schemas required to define the mapping, instead of having GeoServer retrieve them from the internet (which is especially useful in case our server doesn’t have access to the web). The main schema is called <code class="docutils literal notranslate"><span class="pre">geosciml.xsd</span></code> and is referred to in <code class="docutils literal notranslate"><span class="pre">geosciml.appschema</span></code> as such:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>...
<span class="nt">&lt;targetTypes&gt;</span>
  <span class="nt">&lt;FeatureType&gt;</span>
    <span class="nt">&lt;schemaUri&gt;</span>geosciml.xsd<span class="nt">&lt;/schemaUri&gt;</span>
  <span class="nt">&lt;/FeatureType&gt;</span>
<span class="nt">&lt;/targetTypes&gt;</span>
...
</pre></div>
</div>
<p>In this case, the main schema depends on several other schemas:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;include</span> <span class="na">schemaLocation=</span><span class="s">&quot;geologicUnit.xsd&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;include</span> <span class="na">schemaLocation=</span><span class="s">&quot;borehole.xsd&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;include</span> <span class="na">schemaLocation=</span><span class="s">&quot;vocabulary.xsd&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;include</span> <span class="na">schemaLocation=</span><span class="s">&quot;geologicRelation.xsd&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;include</span> <span class="na">schemaLocation=</span><span class="s">&quot;fossil.xsd&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;include</span> <span class="na">schemaLocation=</span><span class="s">&quot;value.xsd&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;include</span> <span class="na">schemaLocation=</span><span class="s">&quot;geologicFeature.xsd&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;include</span> <span class="na">schemaLocation=</span><span class="s">&quot;geologicAge.xsd&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;include</span> <span class="na">schemaLocation=</span><span class="s">&quot;earthMaterial.xsd&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;include</span> <span class="na">schemaLocation=</span><span class="s">&quot;collection.xsd&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;include</span> <span class="na">schemaLocation=</span><span class="s">&quot;geologicStructure.xsd&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>They don’t need to be listed in the <code class="docutils literal notranslate"><span class="pre">targetTypes</span></code> section of the mapping configuration, but they must be included in the ZIP archive that will be uploaded.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The GeoSciML schemas listed above, as pretty much any application schema out there, reference the base GML schemas (notably, <code class="docutils literal notranslate"><span class="pre">http://schemas.opengis.net/gml/3.1.1/base/gml.xsd</span></code>) and a few other remotely hosted schemas (e.g. <code class="docutils literal notranslate"><span class="pre">http://www.geosciml.org/cgiutilities/1.0/xsd/cgiUtilities.xsd</span></code>).
For the example to work in a completely offline environment, one would have to either replace all remote references with local ones, or pre-populate the app-schema cache with a copy of the remote schemas. <a class="reference internal" href="../data/app-schema/app-schema-resolution.html#app-schema-cache"><span class="std std-ref">GeoServer’s user manual</span></a> contains more information on the app-schema cache.</p>
</div>
<p>To summarize, we’ll upload to GeoServer a ZIP archive with the following contents:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">geosciml.appschema      # main mapping file</span>
<span class="go">cgi_termvalue.xml       # secondary mapping file</span>
<span class="go">geosciml.xsd            # main schema</span>
<span class="go">borehole.xsd</span>
<span class="go">collection.xsd</span>
<span class="go">earthMaterial.xsd</span>
<span class="go">fossil.xsd</span>
<span class="go">geologicAge.xsd</span>
<span class="go">geologicFeature.xsd</span>
<span class="go">geologicRelation.xsd</span>
<span class="go">geologicStructure.xsd</span>
<span class="go">geologicUnit.xsd</span>
<span class="go">value.xsd</span>
<span class="go">vocabulary.xsd</span>
</pre></div>
</div>
<p><em>Request</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>curl -X PUT --data-binary @geosciml.zip -H &quot;Content-Type: application/zip&quot;
-u admin:geoserver http://localhost:8080/geoserver/rest/workspaces/gsml/datastores/geosciml/file.appschema?configure=all
</pre></div>
</div>
</div>
<p><em>Response</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">200</span> <span class="n">OK</span>
</pre></div>
</div>
<p>A new <code class="docutils literal notranslate"><span class="pre">geosciml</span></code> data store will be created with three feature types in it:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;featureTypes&gt;</span>
  <span class="nt">&lt;featureType&gt;</span>
    <span class="nt">&lt;name&gt;</span>MappedFeature<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;atom:link</span> <span class="na">xmlns:atom=</span><span class="s">&quot;http://www.w3.org/2005/Atom&quot;</span> <span class="na">rel=</span><span class="s">&quot;alternate&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:8080/geoserver/rest/workspaces/gsml/datastores/geosciml/featuretypes/MappedFeature.xml&quot;</span> <span class="na">type=</span><span class="s">&quot;application/xml&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/featureType&gt;</span>
  <span class="nt">&lt;featureType&gt;</span>
    <span class="nt">&lt;name&gt;</span>GeologicEvent<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;atom:link</span> <span class="na">xmlns:atom=</span><span class="s">&quot;http://www.w3.org/2005/Atom&quot;</span> <span class="na">rel=</span><span class="s">&quot;alternate&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:8080/geoserver/rest/workspaces/gsml/datastores/geosciml/featuretypes/GeologicEvent.xml&quot;</span> <span class="na">type=</span><span class="s">&quot;application/xml&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/featureType&gt;</span>
  <span class="nt">&lt;featureType&gt;</span>
    <span class="nt">&lt;name&gt;</span>GeologicUnit<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;atom:link</span> <span class="na">xmlns:atom=</span><span class="s">&quot;http://www.w3.org/2005/Atom&quot;</span> <span class="na">rel=</span><span class="s">&quot;alternate&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:8080/geoserver/rest/workspaces/gsml/datastores/geosciml/featuretypes/GeologicUnit.xml&quot;</span> <span class="na">type=</span><span class="s">&quot;application/xml&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/featureType&gt;</span>
<span class="nt">&lt;/featureTypes&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="cleaning-schemas-on-internal-mongodb-stores">
<h1>Cleaning schemas on internal MongoDB stores<a class="headerlink" href="#cleaning-schemas-on-internal-mongodb-stores" title="Permalink to this headline">¶</a></h1>
<p><strong>Clean persisted schema on an internal MongoDB Store, allowing it to generate a new one from data.</strong></p>
<p><em>Request template</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span>
  <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="p">:</span><span class="n">geoserver</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">workspaces</span><span class="o">/</span><span class="p">{</span><span class="n">WORKSPACE</span><span class="p">}</span><span class="o">/</span><span class="n">appschemastores</span><span class="o">/</span><span class="p">{</span><span class="n">APP_SCHEMA_STORE_NAME</span><span class="p">}</span><span class="o">/</span><span class="n">datastores</span><span class="o">/</span><span class="p">{</span><span class="n">INTERNAL_STORE_ID</span><span class="p">}</span><span class="o">/</span><span class="n">cleanSchemas</span>
</pre></div>
</div>
</div>
<p><em>Request</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span>
  <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="p">:</span><span class="n">geoserver</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">workspaces</span><span class="o">/</span><span class="n">st</span><span class="o">/</span><span class="n">appschemastores</span><span class="o">/</span><span class="n">AppSchemaStoreName</span><span class="o">/</span><span class="n">datastores</span><span class="o">/</span><span class="n">store_id</span><span class="o">/</span><span class="n">cleanSchemas</span>
</pre></div>
</div>
</div>
<p><em>Response</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">200</span> <span class="n">OK</span>
</pre></div>
</div>
<p><strong>Clean persisted schema on all internal MongoDB Stores, allowing it to generate them from data.</strong></p>
<p><em>Request template</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span>
  <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="p">:</span><span class="n">geoserver</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">workspaces</span><span class="o">/</span><span class="p">{</span><span class="n">WORKSPACE</span><span class="p">}</span><span class="o">/</span><span class="n">appschemastores</span><span class="o">/</span><span class="p">{</span><span class="n">APP_SCHEMA_STORE_NAME</span><span class="p">}</span><span class="o">/</span><span class="n">cleanSchemas</span>
</pre></div>
</div>
</div>
<p><em>Request</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span>
  <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="p">:</span><span class="n">geoserver</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span><span class="n">geoserver</span><span class="o">/</span><span class="n">rest</span><span class="o">/</span><span class="n">workspaces</span><span class="o">/</span><span class="n">st</span><span class="o">/</span><span class="n">appschemastores</span><span class="o">/</span><span class="n">AppSchemaStoreName</span><span class="o">/</span><span class="n">cleanSchemas</span>
</pre></div>
</div>
</div>
<p><em>Response</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">200</span> <span class="n">OK</span>
</pre></div>
</div>
<p><strong>Rebuild persisted schema on internal MongoDB Store, allowing it to generate them from data and query parameters.</strong></p>
<p><em>Request template</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>curl -v -X POST
  -u admin:geoserver http://localhost:8080/geoserver/rest/workspaces/{WORKSPACE}/appschemastores/{APP_SCHEMA_STORE_NAME}/datastores/{INTERNAL_STORE_ID}/rebuildMongoSchemas?ids={ID_1},{ID_2}&amp;max={MAX_OBJECTS}
</pre></div>
</div>
</div>
<ul class="simple">
<li><p>ids: Comma separated MongoDB JSON objects ids to query for generating schemas.  Not required if the ‘max’ is setted.</p></li>
<li><p>max: Max number of MongoDB JSON objects to get for generating schemas.  Not required if the ‘ids’ is setted.</p></li>
</ul>
<p><em>Request</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>curl -v -X POST
  -u admin:geoserver http://localhost:8080/geoserver/rest/workspaces/st/appschemastores/AppSchemaStoreName/datastores/store_id/rebuildMongoSchemas?ids=58e5889ce4b02461ad5af081,58e5889ce4b02461ad5af080&amp;max=5
</pre></div>
</div>
</div>
<p><em>Response</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">200</span> <span class="n">OK</span>
</pre></div>
</div>
<p><strong>Rebuild persisted schema on all internal MongoDB Stores, allowing it to generate them from data and query parameters.</strong></p>
<p><em>Request template</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>curl -v -X POST
  -u admin:geoserver http://localhost:8080/geoserver/rest/workspaces/{WORKSPACE}/appschemastores/{APP_SCHEMA_STORE_NAME}/rebuildMongoSchemas?ids={ID_1},{ID_2}&amp;max={MAX_OBJECTS}
</pre></div>
</div>
</div>
<ul class="simple">
<li><p>ids: Comma separated MongoDB JSON objects ids to query for generating schemas.  Not required if the ‘max’ is setted.</p></li>
<li><p>max: Max number of MongoDB JSON objects to get for generating schemas.  Not required if the ‘ids’ is setted.</p></li>
</ul>
<p><em>Request</em></p>
<div class="admonition-curl admonition">
<p class="admonition-title">curl</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>curl -v -X POST
  -u admin:geoserver http://localhost:8080/geoserver/rest/workspaces/st/appschemastores/AppSchemaStoreName/rebuildMongoSchemas?ids=58e5889ce4b02461ad5af081,58e5889ce4b02461ad5af080&amp;max=5
</pre></div>
</div>
</div>
<p><em>Response</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">200</span> <span class="n">OK</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This endpoins are only available when App-Schema and MongoDB modules are installed on Geoserver, and involved app-schema store have internal MongoDB stores in mappings definition.</p>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="imagemosaic.html" title="previous chapter">Uploading a new image mosaic</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="api/index.html" title="next chapter">REST configuration API reference</a></div>
      </div>
      </div><!-- /#content> -->
      <div id="content-right" class="content-border"></div>
  <div id="sidebar" class="contrast">
      <div id="toc" class="section">
        <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Uploading an app-schema mapping file</a></li>
<li><a class="reference internal" href="#listing-app-schema-store-details">Listing app-schema store details</a></li>
<li><a class="reference internal" href="#uploading-a-new-app-schema-mapping-configuration-file">Uploading a new app-schema mapping configuration file</a></li>
<li><a class="reference internal" href="#uploading-multiple-app-schema-mapping-files">Uploading multiple app-schema mapping files</a></li>
<li><a class="reference internal" href="#cleaning-schemas-on-internal-mongodb-stores">Cleaning schemas on internal MongoDB stores</a></li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="imagemosaic.html" title="previous chapter">Uploading a new image mosaic</a></li>
            <li>Next: <a href="api/index.html" title="next chapter">REST configuration API reference</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
                
        <li><a href="https://github.com/geoserver/geoserver/tree/master/doc/en/user/source/rest/appschema.rst">Edit</a></li>
        </ul>
        </div>
  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div><!-- /#main -->
<div id="footer">
  <div class="wrap">
    &copy; Copyright 2021, Open Source Geospatial Foundation. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    Last updated on Jul 20, 2021.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div><!-- /.wrap> -->
</div><!-- /#footer -->
  </body>
</html>